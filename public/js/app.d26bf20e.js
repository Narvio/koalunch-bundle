(function(){var e={6264:function(e,t,a){"use strict";a.r(t),t["default"]={dashboard:{searchRestaurant:e=>{const{normalize:t}=e;return t(["Vyhledat restauraci"])}},contact:{contact:e=>{const{normalize:t}=e;return t(["Kontakt"])},addRestaurant:e=>{const{normalize:t}=e;return t(["Přidat restauraci"])},restaurantName:e=>{const{normalize:t}=e;return t(["Název restaurace"])},restaurantUrl:e=>{const{normalize:t}=e;return t(["URL adresa"])},submit:e=>{const{normalize:t}=e;return t(["Odeslat"])},cancel:e=>{const{normalize:t}=e;return t(["Zrušit"])},yourName:e=>{const{normalize:t}=e;return t(["Tvoje jméno"])},addRestaurantMessage:e=>{const{normalize:t}=e;return t(["Nenašel jsi zde svou oblíbenou restauraci? Nevadí, dej nám vědět a my se pokusíme ji do seznamu zařadit!"])},note:e=>{const{normalize:t}=e;return t(["Poznámka"])},message:e=>{const{normalize:t}=e;return t(["Vzkaz"])},contactMessage:e=>{const{normalize:t}=e;return t(["Máš nějaké přípomínky nebo návrhy na zlepšení? Napiš nám zprávu a my na tom zapracujeme!"])}},favourites:{all:e=>{const{normalize:t}=e;return t(["Vše"])},favourites:e=>{const{normalize:t}=e;return t(["Oblíbené"])}},restaurant:{new:e=>{const{normalize:t}=e;return t(["NOVINKA"])}}}},3482:function(e,t,a){"use strict";a.r(t),t["default"]={dashboard:{searchRestaurant:e=>{const{normalize:t}=e;return t(["Search Restaurant"])}},contact:{contact:e=>{const{normalize:t}=e;return t(["Contact"])},addRestaurant:e=>{const{normalize:t}=e;return t(["Add Restaurant"])},restaurantName:e=>{const{normalize:t}=e;return t(["Restaurant Name"])},restaurantUrl:e=>{const{normalize:t}=e;return t(["Restaurant URL"])},submit:e=>{const{normalize:t}=e;return t(["Submit"])},cancel:e=>{const{normalize:t}=e;return t(["Cancel"])},yourName:e=>{const{normalize:t}=e;return t(["Your Name"])},addRestaurantMessage:e=>{const{normalize:t}=e;return t(["Are you missing your favourite restaurant? Let us know and we will do our best to include it in our list!"])},note:e=>{const{normalize:t}=e;return t(["Note"])},message:e=>{const{normalize:t}=e;return t(["Message"])},contactMessage:e=>{const{normalize:t}=e;return t(["Having some troubles or ideas what to improve? Feel free to leave us a message!"])}},favourites:{all:e=>{const{normalize:t}=e;return t(["All"])},favourites:e=>{const{normalize:t}=e;return t(["Favourites"])}},restaurant:{new:e=>{const{normalize:t}=e;return t(["NEW"])}}}},1279:function(e,t,a){"use strict";var n=a(9963),s=a(7502),r=a.n(s),o=a(6252),i=a.p+"img/search.f55b15ab.svg";const u=(0,o._)("div",{class:"koalunch-logo"},null,-1),l={class:"columns field search-row"},c={class:"column is-2 favourite-switch"},d={class:"column is-4 is-offset-2"},h={class:"control has-icons-left"},m=["placeholder"],v=(0,o._)("span",{class:"icon is-left"},[(0,o._)("img",{src:i})],-1),g=(0,o.uE)('<footer class="footer"><div class="content has-text-centered"><p><strong>Koalunch</strong> by <a href="https://www.linkedin.com/in/michalkozubik/">Michal Kozubík</a> | <a href="https://narvio.github.io/">Narvio</a> | <a href="https://github.com/Narvio/koalunch">GitHub</a></p></div></footer>',1);function f(e,t,a,s,r,i){const f=(0,o.up)("nav-bar"),p=(0,o.up)("show-favourites-switch"),y=(0,o.up)("dashboard");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(f),u,(0,o._)("div",l,[(0,o._)("div",c,[(0,o.Wm)(p)]),(0,o._)("div",d,[(0,o._)("div",h,[(0,o.wy)((0,o._)("input",{class:"input",type:"text",placeholder:e.$t("dashboard.searchRestaurant"),"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchInputValue=t)},null,8,m),[[n.nr,e.searchInputValue,void 0,{trim:!0}]]),v])])]),(0,o.Wm)(y,{searchQuery:e.searchExpression},null,8,["searchQuery"]),g],64)}function p(e,t,a,n,s,r){const i=(0,o.up)("dashboard-item"),u=(0,o.up)("grid-layout");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(u,{ref:"gridLayout",layout:e.layout,"onUpdate:layout":t[0]||(t[0]=t=>e.layout=t),"col-num":3,"row-height":30,"is-draggable":!0,"is-resizable":!0,"is-mirrored":!1,responsive:!0,"vertical-compact":!0,margin:[10,10],"use-css-transforms":!0,cols:{lg:3,md:2,sm:1,xs:1,xxs:1},onBreakpointChanged:e.onBreakpointChanged},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.layout,(t=>((0,o.wg)(),(0,o.j4)(i,{item:t,key:t.i,onMoved:e.onLayoutChanged,onResized:e.onLayoutChanged},null,8,["item","onMoved","onResized"])))),128))])),_:1},8,["layout","onBreakpointChanged"])])}var y,b,w=a(3907);(function(e){e["LoadRestaurants"]="LoadRestaurants",e["SendContactFeedback"]="SendContactFeedback",e["SendRestaurantFeedback"]="SendRestaurantFeedback"})(y||(y={})),function(e){e["RestaurantsLoaded"]="RestaurantsLoaded",e["SearchRestaurants"]="SearchRestaurants",e["ApplyLayout"]="ApplyLayout",e["MarkFavourite"]="MarkFavourite",e["ToggleFilterFavourites"]="ToggleFilterFavourites"}(b||(b={}));const _={ref:"filler",class:"card koalunch-dashboard-item-filler"};function k(e,t,a,n,s,r){const i=(0,o.up)("restaurand-card"),u=(0,o.up)("grid-item");return e.item?((0,o.wg)(),(0,o.j4)(u,{ref:"gridItem",x:e.item.x,y:e.item.y,w:e.item.w,h:e.item.h,i:e.item.i,"min-h":e.minH,"max-h":e.maxH,key:e.item.i,"drag-allow-from":".card-header","drag-ignore-from":".koalunch-card-content",onMoved:e.onMoved,onResized:e.onResized},{default:(0,o.w5)((()=>[(0,o._)("div",_,null,512),(0,o.Wm)(i,{restaurant:e.item.restaurant,onResized:e.onCardResized},null,8,["restaurant","onResized"])])),_:1},8,["x","y","w","h","i","min-h","max-h","onMoved","onResized"])):(0,o.kq)("",!0)}var z=a(3577);const R=["data-res"],F={class:"card-header koalunch-card-header"},C={class:"card-header-title koalunch-card-title"},S={key:0,class:"tag is-danger mr-2"},x={class:"icon is-large ion-ionic koalunch-icon"},D=["href"],L={class:"icon is-large ion-ionic koalunch-icon"},I={class:"content koalunch-card-content"};function O(e,t,a,n,s,r){const i=(0,o.up)("ion-icon"),u=(0,o.up)("busy-indicator"),l=(0,o.up)("failure-message"),c=(0,o.up)("PDFPreview"),d=(0,o.up)("menu-section");return(0,o.wg)(),(0,o.iD)("div",{class:"card koalunch-card",ref:"card","data-res":e.restaurant?.id},[(0,o._)("header",F,[(0,o._)("p",C,[e.restaurant?.isNew?((0,o.wg)(),(0,o.iD)("span",S,(0,z.zw)(e.$t("restaurant.new")),1)):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,z.zw)(e.restaurant?.name),1)]),void 0!==e.restaurant?((0,o.wg)(),(0,o.iD)("a",{key:0,class:"button is-ghost koalunch-card-header-button",onClick:t[0]||(t[0]=()=>e.onFavourite(e.restaurant?.id||""))},[(0,o._)("span",x,[(0,o.Wm)(i,{size:"large",name:"star"+(e.favourites[e.restaurant.id]?"":"-outline")},null,8,["name"])])])):(0,o.kq)("",!0),(0,o._)("a",{class:"button is-ghost koalunch-card-header-button",target:"_blank",href:e.restaurant?.url},[(0,o._)("span",L,[(0,o.Wm)(i,{size:"large",name:"open-outline"})])],8,D)]),(0,o._)("div",I,[e.isLoading?((0,o.wg)(),(0,o.j4)(u,{key:0})):(0,o.kq)("",!0),e.isFailed?((0,o.wg)(),(0,o.j4)(l,{key:1,message:"Menu se nepodařilo načíst"})):(0,o.kq)("",!0),e.menu?((0,o.wg)(),(0,o.iD)(o.HY,{key:2},[e.isPdfMenu?((0,o.wg)(),(0,o.j4)(c,{key:0,pdfInfo:e.menu.pdfInfo},null,8,["pdfInfo"])):(0,o.kq)("",!0),e.menu.menus&&0!==e.menu.menus.length?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(e.menu.menus,(e=>((0,o.wg)(),(0,o.j4)(d,{section:e,key:e},null,8,["section"])))),128)):(0,o.kq)("",!0)],64)):(0,o.kq)("",!0)])],8,R)}var N;(function(e){e[e["Standard"]=0]="Standard",e[e["PDF"]=1]="PDF"})(N||(N={}));const j={class:"table is-striped is-narrow is-hoverable"},M={key:0},$={colspan:"2"};function V(e,t,a,n,s,r){return(0,o.wg)(),(0,o.iD)("table",j,[(0,o._)("tbody",null,[e.section.name?((0,o.wg)(),(0,o.iD)("tr",M,[(0,o._)("td",$,[(0,o._)("strong",null,(0,z.zw)(e.section.name),1)])])):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.section.meals,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e},[(0,o._)("td",null,(0,z.zw)(e.name),1),(0,o._)("td",null,(0,z.zw)(e.price),1)])))),128))])])}var Z=(0,o.aZ)({props:{section:{required:!0,type:Object}}}),T=a(3744);const B=(0,T.Z)(Z,[["render",V],["__scopeId","data-v-75d7052c"]]);var U=B,P=a.p+"img/spinner.f072ddf8.svg";const q=e=>((0,o.dD)("data-v-189a965b"),e=e(),(0,o.Cn)(),e),H={class:"koalunch-busyIndicator"},W=q((()=>(0,o._)("img",{src:P},null,-1))),A=[W];function E(e,t,a,n,s,r){return(0,o.wg)(),(0,o.iD)("div",H,A)}var Y=(0,o.aZ)({});const J=(0,T.Z)(Y,[["render",E],["__scopeId","data-v-189a965b"]]);var K=J,Q=a.p+"img/wrong.4c9fe4b5.png";const G=e=>((0,o.dD)("data-v-44a39288"),e=e(),(0,o.Cn)(),e),X={class:"koalunch-failure"},ee={class:"koalunch-failure-text"},te=G((()=>(0,o._)("img",{src:Q,class:"koalunch-failure-image"},null,-1)));function ae(e,t,a,n,s,r){return(0,o.wg)(),(0,o.iD)("div",X,[(0,o._)("p",ee,(0,z.zw)(e.message),1),te])}var ne=(0,o.aZ)({props:{message:String}});const se=(0,T.Z)(ne,[["render",ae],["__scopeId","data-v-44a39288"]]);var re=se;const oe={key:1,class:"koalunch-pdf-container"},ie={ref:"canvas"};function ue(e,t,a,n,s,r){const i=(0,o.up)("failure-message");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.isFailed?((0,o.wg)(),(0,o.j4)(i,{key:0,message:"Menu se nepovedlo načíst"})):(0,o.kq)("",!0),e.isFailed?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",oe,[(0,o._)("canvas",ie,null,512)]))],64)}const le=a(2372);var ce=(0,o.aZ)({components:{FailureMessage:re},props:{pdfInfo:Object},data(){return{isFailed:!1,pdfLib:le}},methods:{_renderPage(e,t,a){const n=a.getViewport({scale:t});e.height=n.height,e.width=n.width,a.render({canvasContext:e.getContext("2d"),viewport:n})},async _loadPdf(e,t){const a=await this.pdfLib.getDocument(e).promise;return a.getPage(t)}},async mounted(){if(this.isFailed=!1,!this.pdfInfo)return;const e=`https://cors-anywhere.herokuapp.com/${this.pdfInfo.url}`,t=this.pdfInfo.content??e;try{const e=await this._loadPdf(t,this.pdfInfo.pages[0]);this._renderPage(this.$refs.canvas,.9,e)}catch(a){this.isFailed=!0}}});const de=(0,T.Z)(ce,[["render",ue],["__scopeId","data-v-6fc5df28"]]);var he=de,me=(0,o.aZ)({components:{MenuSection:U,BusyIndicator:K,PDFPreview:he,FailureMessage:re},props:{restaurant:Object},emits:["resized"],computed:{...(0,w.rn)({favourites:e=>e.favourites.reduce(((e,t)=>({...e,[t]:!0})),{})}),isPdfMenu(){return this.menu?.type===N.PDF}},data(){return{isLoading:!0,isFailed:!1,menu:null}},methods:{...(0,w.OI)([b.MarkFavourite]),onFavourite(e){this[b.MarkFavourite](e)}},async mounted(){const e=new window.ResizeObserver((e=>{this.$emit("resized",{width:e[0].contentRect.width>0?e[0].contentRect.width:window.screen.availWidth,height:e[0].contentRect.height})}));e.observe(this.$refs.card);try{const e=await fetch(`/api/menu/${this.restaurant?.id}`),t=await e.json();this.menu=t,this.isLoading=!1}catch(t){this.isFailed=!0,this.isLoading=!1}}});const ve=(0,T.Z)(me,[["render",O],["__scopeId","data-v-1920e811"]]);var ge=ve,fe=(0,o.aZ)({emits:["moved","resized"],data(){return{minH:10,maxH:1/0,nonReactive:{}}},components:{RestaurandCard:ge},props:{item:Object},mounted(){const e=new window.ResizeObserver((()=>{this.nonReactive.isResizing||this.onCardResized(this.nonReactive.cardSize)}));e.observe(this.$refs.filler)},methods:{onCardResized(e){const t=this.$refs.gridItem;if(t&&e){this.nonReactive.isResizing=!0;try{const a=t.calcWH(e.height,e.width,!0);this.maxH=a.h,this.minH=a.h,t.eventBus.emit("resizeEvent",{eventType:"resizeend",i:t.i,x:t.innerX,y:t.innerY,h:a.h,w:a.w}),this.nonReactive.cardSize=e}finally{this.nonReactive.isResizing=!1}}},onMoved(){this.$emit("moved")},onResized(){this.$emit("resized")}}});const pe=(0,T.Z)(fe,[["render",k],["__scopeId","data-v-9e2b52d0"]]);var ye=pe,be=(0,o.aZ)({components:{DashboardItem:ye},props:{searchQuery:String},data(){return{layout:[],currentBreakpoint:"lg"}},methods:{...(0,w.nv)([y.LoadRestaurants]),...(0,w.OI)([b.SearchRestaurants,b.ApplyLayout]),resetInnerLayoutData(){const e=this.$refs.gridLayout;e.lastBreakpoint=null,e.layouts={}},filterLayout(e=""){""!==e&&this[b.SearchRestaurants](""),this.$nextTick((()=>{this[b.SearchRestaurants](e)}))},recreateLayout(){const e=this.searchQuery?[]:this.storedLayout[this.currentBreakpoint]||[],{withLayout:t,withoutLayout:a}=this.restaurants.reduce(((t,a)=>{const n=e.find((({i:e})=>e===a.id));return n?t.withLayout.push({...n,restaurant:a}):t.withoutLayout.push(a),t}),{withLayout:[],withoutLayout:[]});this.layout=t.concat(a.map(((e,t)=>({x:t%3,y:Math.floor(t/4),w:1,h:10,i:e.id,restaurant:e}))))},onLayoutChanged(){this[b.ApplyLayout]({breakpoint:this.currentBreakpoint,layout:this.layout.map((e=>({x:e.x,y:e.y,h:e.h,w:e.w,i:e.i})))})},onBreakpointChanged(e){this.currentBreakpoint=e}},computed:{...(0,w.rn)({storedLayout:e=>e.layout}),...(0,w.Se)({restaurants:"visibleRestaurants"})},watch:{searchQuery(e){this.filterLayout(e)},restaurants(){this.recreateLayout()}},async mounted(){await this[y.LoadRestaurants](),this.filterLayout(),this.resetInnerLayoutData()}});const we=(0,T.Z)(be,[["render",p]]);var _e=we;const ke=e=>((0,o.dD)("data-v-9fd6bd74"),e=e(),(0,o.Cn)(),e),ze={class:"navbar",role:"navigation","aria-label":"main navigation"},Re=ke((()=>(0,o._)("div",{class:"navbar-brand"},[(0,o._)("a",{class:"navbar-item koalunch-navbar-title",href:"#"},"Koalunch"),(0,o._)("a",{role:"button",class:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},[(0,o._)("span",{"aria-hidden":"true"}),(0,o._)("span",{"aria-hidden":"true"}),(0,o._)("span",{"aria-hidden":"true"})])],-1))),Fe={class:"navbar-menu"},Ce={class:"navbar-start"},Se={class:"navbar-item"},xe={class:"navbar-end"},De={class:"navbar-item"},Le={class:"buttons"};function Ie(e,t,a,n,s,r){const i=(0,o.up)("AddRestaurantDialog"),u=(0,o.up)("ContactDialog");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("nav",ze,[Re,(0,o._)("div",Fe,[(0,o._)("div",Ce,[(0,o._)("div",Se,[(0,o._)("span",null,(0,z.zw)(e.currentLocation),1)])]),(0,o._)("div",xe,[(0,o._)("div",De,[(0,o._)("div",Le,[(0,o._)("a",{class:"button",onClick:t[0]||(t[0]=(...t)=>e.showContactDialog&&e.showContactDialog(...t))},(0,z.zw)(e.$t("contact.contact")),1),(0,o._)("a",{class:"button is-primary",onClick:t[1]||(t[1]=(...t)=>e.addRestaurant&&e.addRestaurant(...t))},[(0,o._)("strong",null,(0,z.zw)(e.$t("contact.addRestaurant")),1)])])])])])]),(0,o.Wm)(i,{ref:"addRestaurantDialog"},null,512),(0,o.Wm)(u,{ref:"contactDialog"},null,512)],64)}var Oe=a.p+"img/koaburger.3e79fbc2.png";const Ne=e=>((0,o.dD)("data-v-afbc3ad2"),e=e(),(0,o.Cn)(),e),je={class:"container"},Me=Ne((()=>(0,o._)("img",{src:Oe},null,-1))),$e={class:"notification is-warning"},Ve={class:"field"},Ze={class:"label"},Te={class:"control"},Be={class:"field"},Ue={class:"label"},Pe={class:"control"},qe={class:"field"},He={class:"label"},We={class:"control"},Ae={class:"field"},Ee={class:"label"},Ye={class:"control"},Je={class:"field is-grouped is-grouped-right"},Ke={class:"control"},Qe={class:"control"};function Ge(e,t,a,s,r,i){const u=(0,o.up)("Modal");return(0,o.wg)(),(0,o.j4)(u,{ref:"modal"},{default:(0,o.w5)((()=>[(0,o._)("div",je,[Me,(0,o._)("div",$e,(0,z.zw)(e.$t("contact.addRestaurantMessage")),1),(0,o._)("div",Ve,[(0,o._)("label",Ze,(0,z.zw)(e.$t("contact.restaurantName")),1),(0,o._)("div",Te,[(0,o.wy)((0,o._)("input",{class:(0,z.C_)(["input",{"is-danger":!e.restaurantName.isValid}]),type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.restaurantName.value=t),onChange:t[1]||(t[1]=t=>e.validate("restaurantName"))},null,34),[[n.nr,e.restaurantName.value]])])]),(0,o._)("div",Be,[(0,o._)("label",Ue,(0,z.zw)(e.$t("contact.restaurantUrl")),1),(0,o._)("div",Pe,[(0,o.wy)((0,o._)("input",{class:(0,z.C_)(["input",{"is-danger":!e.restaurantUrl.isValid}]),type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.restaurantUrl.value=t),onChange:t[3]||(t[3]=t=>e.validate("restaurantUrl"))},null,34),[[n.nr,e.restaurantUrl.value]])])]),(0,o._)("div",qe,[(0,o._)("label",He,(0,z.zw)(e.$t("contact.yourName")),1),(0,o._)("div",We,[(0,o.wy)((0,o._)("input",{class:(0,z.C_)(["input",{"is-danger":!e.name.isValid}]),type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.name.value=t),onChange:t[5]||(t[5]=t=>e.validate("name"))},null,34),[[n.nr,e.name.value]])])]),(0,o._)("div",Ae,[(0,o._)("label",Ee,(0,z.zw)(e.$t("contact.note")),1),(0,o._)("div",Ye,[(0,o.wy)((0,o._)("textarea",{class:(0,z.C_)(["textarea",{"is-danger":!e.note.isValid}]),"onUpdate:modelValue":t[6]||(t[6]=t=>e.note.value=t),onChange:t[7]||(t[7]=t=>e.validate("note"))},null,34),[[n.nr,e.note.value]])])]),(0,o._)("div",Je,[(0,o._)("div",Ke,[(0,o._)("button",{class:"button is-link",onClick:t[8]||(t[8]=(...t)=>e.submit&&e.submit(...t))},(0,z.zw)(e.$t("contact.submit")),1)]),(0,o._)("div",Qe,[(0,o._)("button",{class:"button is-link is-light",onClick:t[9]||(t[9]=(...t)=>e.toggle&&e.toggle(...t))},(0,z.zw)(e.$t("contact.cancel")),1)])])])])),_:1},512)}const Xe={class:"modal-content"};function et(e,t,a,n,s,r){const i=(0,o.up)("busy-indicator");return(0,o.wg)(),(0,o.iD)("div",{class:(0,z.C_)(["modal",{"is-active":e.isOpen}])},[(0,o._)("div",{class:"modal-background",onClick:t[0]||(t[0]=(...t)=>e.toggle&&e.toggle(...t))}),(0,o._)("div",Xe,[e.isBusy?((0,o.wg)(),(0,o.j4)(i,{key:0})):(0,o.kq)("",!0),e.isBusy?(0,o.kq)("",!0):(0,o.WI)(e.$slots,"default",{key:1},void 0,!0)]),(0,o._)("button",{class:"modal-close is-large","aria-label":"close",onClick:t[1]||(t[1]=(...t)=>e.toggle&&e.toggle(...t))})],2)}var tt=(0,o.aZ)({components:{BusyIndicator:K},data(){return{isOpen:!1,isBusy:!1}},methods:{toggle(){this.isOpen=!this.isOpen}}});const at=(0,T.Z)(tt,[["render",et],["__scopeId","data-v-597cbd9a"]]);var nt=at,st=(0,o.aZ)({methods:{modal(){return this.$refs.modal},toggle(){this.modal().toggle()},setBusy(e){this.modal().isBusy=e}}});function rt(e){return(0,o.aZ)({computed:{allFields(){return e.map((e=>this[e]))}},methods:{validate(e){const t=e?[this[e]]:this.allFields;return t.forEach((e=>{e.isValid=!e.isRequired||Boolean(e.value)})),t.every((e=>e.isValid))},resetFields(){this.allFields.forEach((e=>{e.value="",e.isValid=!0}))}}})}var ot=rt,it=(0,o.aZ)({mixins:[st,ot(["restaurantName","restaurantUrl","name","note"])],components:{Modal:nt},data(){return{restaurantName:{value:"",isValid:!0,isRequired:!0},restaurantUrl:{value:"",isValid:!0,isRequired:!0},name:{value:"",isValid:!0,isRequired:!0},note:{value:"",isValid:!0,isRequired:!1}}},methods:{...(0,w.nv)([y.SendRestaurantFeedback]),submit(){if(this.validate())try{this.setBusy(!0),this[y.SendRestaurantFeedback]({name:this.name.value,note:this.note.value,restaurantName:this.restaurantName.value,restaurantUrl:this.restaurantUrl.value})}finally{this.setBusy(!1),this.resetFields(),this.toggle()}}}});const ut=(0,T.Z)(it,[["render",Ge],["__scopeId","data-v-afbc3ad2"]]);var lt=ut,ct=a.p+"img/pencil.49df2b88.png";const dt=e=>((0,o.dD)("data-v-47b021cf"),e=e(),(0,o.Cn)(),e),ht={class:"container"},mt=dt((()=>(0,o._)("img",{src:ct},null,-1))),vt={class:"notification is-warning"},gt={class:"field"},ft={class:"label"},pt={class:"control"},yt={class:"field"},bt={class:"label"},wt={class:"control"},_t={class:"field is-grouped is-grouped-right"},kt={class:"control"},zt={class:"control"};function Rt(e,t,a,s,r,i){const u=(0,o.up)("Modal");return(0,o.wg)(),(0,o.j4)(u,{ref:"modal"},{default:(0,o.w5)((()=>[(0,o._)("div",ht,[mt,(0,o._)("div",vt,(0,z.zw)(e.$t("contact.contactMessage")),1),(0,o._)("div",gt,[(0,o._)("label",ft,(0,z.zw)(e.$t("contact.yourName")),1),(0,o._)("div",pt,[(0,o.wy)((0,o._)("input",{class:(0,z.C_)(["input",{"is-danger":!e.name.isValid}]),type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.name.value=t),onChange:t[1]||(t[1]=t=>e.validate("name"))},null,34),[[n.nr,e.name.value]])])]),(0,o._)("div",yt,[(0,o._)("label",bt,(0,z.zw)(e.$t("contact.message")),1),(0,o._)("div",wt,[(0,o.wy)((0,o._)("textarea",{class:(0,z.C_)(["textarea",{"is-danger":!e.message.isValid}]),"onUpdate:modelValue":t[2]||(t[2]=t=>e.message.value=t),onChange:t[3]||(t[3]=t=>e.validate("message"))},null,34),[[n.nr,e.message.value]])])]),(0,o._)("div",_t,[(0,o._)("div",kt,[(0,o._)("button",{class:"button is-link",onClick:t[4]||(t[4]=(...t)=>e.submit&&e.submit(...t))},(0,z.zw)(e.$t("contact.submit")),1)]),(0,o._)("div",zt,[(0,o._)("button",{class:"button is-link is-light",onClick:t[5]||(t[5]=(...t)=>e.toggle&&e.toggle(...t))},(0,z.zw)(e.$t("contact.cancel")),1)])])])])),_:1},512)}var Ft=(0,o.aZ)({mixins:[st,ot(["name","message"])],components:{Modal:nt},data(){return{name:{value:"",isValid:!0,isRequired:!0},message:{value:"",isValid:!0,isRequired:!0}}},methods:{...(0,w.nv)([y.SendContactFeedback]),async submit(){if(this.validate())try{this.setBusy(!0),await this[y.SendContactFeedback]({name:this.name.value,note:this.message.value})}finally{this.setBusy(!1),this.resetFields(),this.toggle()}}}});const Ct=(0,T.Z)(Ft,[["render",Rt],["__scopeId","data-v-47b021cf"]]);var St=Ct,xt=(0,o.aZ)({components:{AddRestaurantDialog:lt,ContactDialog:St},props:{currentLocation:{type:String,default:"Brno (Holandská)"}},methods:{addRestaurant(){const e=this.$refs.addRestaurantDialog;e.toggle()},showContactDialog(){const e=this.$refs.contactDialog;e.toggle()}}});const Dt=(0,T.Z)(xt,[["render",Ie],["__scopeId","data-v-9fd6bd74"]]);var Lt=Dt;const It={class:"buttons has-addons koalunch-buttons"},Ot={class:"icon-text"},Nt={class:"icon ion-ionic koalunch-icon"},jt={class:"icon-text"},Mt={class:"icon ion-ionic koalunch-icon"};function $t(e,t,a,n,s,r){const i=(0,o.up)("ion-icon");return(0,o.wg)(),(0,o.iD)("div",It,[(0,o._)("a",{class:(0,z.C_)(["button koalunch-card-header-button",{"is-selected":!e.filterFavourites,"koalunch-selected":!e.filterFavourites}]),onClick:t[0]||(t[0]=()=>e.onSwitch(!1))},[(0,o._)("span",Ot,[(0,o._)("span",Nt,[(0,o.Wm)(i,{name:"grid"+(e.filterFavourites?"-outline":"")},null,8,["name"])]),(0,o._)("span",null,(0,z.zw)(e.$t("favourites.all")),1)])],2),(0,o._)("a",{class:(0,z.C_)(["button koalunch-card-header-button",{"is-selected":e.filterFavourites,"koalunch-selected":e.filterFavourites}]),onClick:t[1]||(t[1]=()=>e.onSwitch(!0))},[(0,o._)("span",jt,[(0,o._)("span",Mt,[(0,o.Wm)(i,{name:"star"+(e.filterFavourites?"":"-outline")},null,8,["name"])]),(0,o._)("span",null,(0,z.zw)(e.$t("favourites.favourites")),1)])],2)])}var Vt=(0,o.aZ)({methods:{...(0,w.OI)([b.ToggleFilterFavourites]),onSwitch(e){this[b.ToggleFilterFavourites](e)}},computed:{...(0,w.rn)({filterFavourites:e=>e.filterFavourites})}});const Zt=(0,T.Z)(Vt,[["render",$t],["__scopeId","data-v-2be45762"]]);var Tt=Zt;const Bt=500;var Ut=(0,o.aZ)({components:{NavBar:Lt,Dashboard:_e,ShowFavouritesSwitch:Tt},data(){return{searchTimeout:0,searchInputValue:"",searchExpression:""}},watch:{searchInputValue(e){this.debounceSearch(e)}},methods:{debounceSearch(e){this.searchTimeout&&clearInterval(this.searchTimeout),this.searchTimeout=setTimeout((()=>{this.searchExpression=e,this.searchTimeout=0}),Bt)}}});const Pt=(0,T.Z)(Ut,[["render",f]]);var qt=Pt,Ht=(a(6699),{async[y.LoadRestaurants](e){const t=await fetch("/api/restaurant");e.commit(b.RestaurantsLoaded,await t.json())},async[y.SendContactFeedback](e,t){await fetch("/feedback/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},async[y.SendRestaurantFeedback](e,t){await fetch("/feedback/addRestaurant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}});const Wt=new Date,At=864e5,Et=10,Yt=e=>{if(!e.dateAdded)return!1;const t=new Date(e.dateAdded);return(Wt.getTime()-t.getTime())/At<=Et};var Jt=Yt,Kt={[b.RestaurantsLoaded](e,t){e.restaurants=t.map((e=>({...e,isNew:Jt(e)})))},[b.SearchRestaurants](e,t=""){e.searchQuery=t},[b.ApplyLayout](e,{breakpoint:t,layout:a}){const n="xs"===t||"xxs"===t?"sm":t;e.layout[n]=a,e.layout={...e.layout,xs:e.layout.sm,xxs:e.layout.sm},localStorage.setItem("layout",JSON.stringify({lg:e.layout.lg}))},[b.MarkFavourite](e,t){e.favourites.includes(t)?e.favourites=e.favourites.filter((e=>e!==t)):e.favourites.push(t),localStorage.setItem("favourites",JSON.stringify(e.favourites))},[b.ToggleFilterFavourites](e,t){e.filterFavourites=t,localStorage.setItem("filterFavourites",JSON.stringify(e.filterFavourites))}},Qt=(0,w.MT)({state:{searchQuery:"",restaurants:[],layout:JSON.parse(localStorage.getItem("layout")||"{}"),favourites:JSON.parse(localStorage.getItem("favourites")||"[]"),filterFavourites:JSON.parse(localStorage.getItem("filterFavourites")||"false")},mutations:Kt,actions:Ht,modules:{},getters:{visibleRestaurants:e=>{const t=e.searchQuery.toLowerCase();let a=e.restaurants.filter((e=>e.name.toLowerCase().includes(t)));return e.filterFavourites&&(a=a.filter((t=>e.favourites.includes(t.id)))),a.sort((({isNew:e})=>e?-1:1))}}}),Gt=a(3324);function Xt(){const e=a(8092),t={};return e.keys().forEach((a=>{const n=a.match(/([A-Za-z0-9-_]+)\./i);if(n&&n.length>1){const s=n[1];t[s]=e(a).default||e(a)}})),t}var ea=(0,Gt.o)({legacy:!1,locale:"cs",fallbackLocale:"en",messages:Xt(),globalInjection:!0});(0,n.ri)(qt).use(ea).use(Qt).use(r()).mount("#app")},8092:function(e,t,a){var n={"./cs.json":6264,"./en.json":3482};function s(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=r,e.exports=s,s.id=8092},3414:function(){},172:function(){},2001:function(){},3779:function(){},6558:function(){},2258:function(){}},t={};function a(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,n,s,r){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],s=e[c][1],r=e[c][2];for(var i=!0,u=0;u<n.length;u++)(!1&r||o>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[u])}))?n.splice(u--,1):(i=!1,r<o&&(o=r));if(i){e.splice(c--,1);var l=s();void 0!==l&&(t=l)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,s,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/public/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,r,o=n[0],i=n[1],u=n[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(u)var c=u(a)}for(t&&t(n);l<o.length;l++)r=o[l],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},n=self["webpackChunkkoalunch"]=self["webpackChunkkoalunch"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(1279)}));n=a.O(n)})();
//# sourceMappingURL=app.d26bf20e.js.map