(function(){var e={6264:function(e,t,n){"use strict";n.r(t),t["default"]={dashboard:{searchRestaurant:e=>{const{normalize:t}=e;return t(["Vyhledat restauraci"])}},contact:{contact:e=>{const{normalize:t}=e;return t(["Kontakt"])},addRestaurant:e=>{const{normalize:t}=e;return t(["Přidat restauraci"])},restaurantName:e=>{const{normalize:t}=e;return t(["Název restaurace"])},restaurantUrl:e=>{const{normalize:t}=e;return t(["URL adresa"])},submit:e=>{const{normalize:t}=e;return t(["Odeslat"])},cancel:e=>{const{normalize:t}=e;return t(["Zrušit"])},yourName:e=>{const{normalize:t}=e;return t(["Tvoje jméno"])},addRestaurantMessage:e=>{const{normalize:t}=e;return t(["Nenašel jsi zde svou oblíbenou restauraci? Nevadí, dej nám vědět a my se pokusíme ji do seznamu zařadit!"])},note:e=>{const{normalize:t}=e;return t(["Poznámka"])},message:e=>{const{normalize:t}=e;return t(["Vzkaz"])},contactMessage:e=>{const{normalize:t}=e;return t(["Máš nějaké přípomínky nebo návrhy na zlepšení? Napiš nám zprávu a my na tom zapracujeme!"])}},viewType:{all:e=>{const{normalize:t}=e;return t(["Vše"])},favourites:e=>{const{normalize:t}=e;return t(["Oblíbené"])},new:e=>{const{normalize:t}=e;return t(["Nové"])}},restaurant:{new:e=>{const{normalize:t}=e;return t(["NOVINKA"])}}}},3482:function(e,t,n){"use strict";n.r(t),t["default"]={dashboard:{searchRestaurant:e=>{const{normalize:t}=e;return t(["Search Restaurant"])}},contact:{contact:e=>{const{normalize:t}=e;return t(["Contact"])},addRestaurant:e=>{const{normalize:t}=e;return t(["Add Restaurant"])},restaurantName:e=>{const{normalize:t}=e;return t(["Restaurant Name"])},restaurantUrl:e=>{const{normalize:t}=e;return t(["Restaurant URL"])},submit:e=>{const{normalize:t}=e;return t(["Submit"])},cancel:e=>{const{normalize:t}=e;return t(["Cancel"])},yourName:e=>{const{normalize:t}=e;return t(["Your Name"])},addRestaurantMessage:e=>{const{normalize:t}=e;return t(["Are you missing your favourite restaurant? Let us know and we will do our best to include it in our list!"])},note:e=>{const{normalize:t}=e;return t(["Note"])},message:e=>{const{normalize:t}=e;return t(["Message"])},contactMessage:e=>{const{normalize:t}=e;return t(["Having some troubles or ideas what to improve? Feel free to leave us a message!"])}},viewType:{all:e=>{const{normalize:t}=e;return t(["All"])},favourites:e=>{const{normalize:t}=e;return t(["Favourites"])},new:e=>{const{normalize:t}=e;return t(["New"])}},restaurant:{new:e=>{const{normalize:t}=e;return t(["NEW"])}}}},3373:function(e,t,n){"use strict";n(6992),n(8674),n(9601),n(7727);var a=n(9963),r=n(7502),i=n.n(r),o=n(6252),s=n(3577),u=n.p+"img/search.f55b15ab.svg",c={class:"columns field search-row"},l={class:"column is-4 favourite-switch"},d={class:"column is-4"},f={class:"control has-icons-left"},v=["placeholder"],h=(0,o._)("span",{class:"icon is-left"},[(0,o._)("img",{src:u})],-1),m=(0,o.uE)('<footer class="footer"><div class="content has-text-centered"><p><strong>Koalunch</strong> by <a href="https://www.linkedin.com/in/michalkozubik/">Michal Kozubík</a> | <a href="https://narvio.github.io/">Narvio</a> | <a href="https://github.com/Narvio/koalunch">GitHub</a></p></div></footer>',1);function p(e,t,n,r,i,u){var p=(0,o.up)("nav-bar"),g=(0,o.up)("show-favourites-switch"),w=(0,o.up)("dashboard");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(p),(0,o._)("div",{class:(0,s.C_)(["koalunch-logo",{"koalunch-logo-hw":e.isHwWeek}])},null,2),(0,o._)("div",c,[(0,o._)("div",l,[(0,o.Wm)(g)]),(0,o._)("div",d,[(0,o._)("div",f,[(0,o.wy)((0,o._)("input",{class:"input",type:"text",placeholder:e.$t("dashboard.searchRestaurant"),"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.searchInputValue=t})},null,8,v),[[a.nr,e.searchInputValue,void 0,{trim:!0}]]),h])])]),(0,o.Wm)(w,{searchQuery:e.searchExpression},null,8,["searchQuery"]),m],64)}function g(e,t,n,a,r,i){var s=(0,o.up)("dashboard-item"),u=(0,o.up)("grid-layout");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(u,{ref:"gridLayout",layout:e.layout,"onUpdate:layout":t[0]||(t[0]=function(t){return e.layout=t}),"col-num":3,"row-height":30,"is-draggable":!0,"is-resizable":!0,"is-mirrored":!1,responsive:!0,"vertical-compact":!0,margin:[10,10],"use-css-transforms":!0,cols:{lg:3,md:2,sm:1,xs:1,xxs:1},onBreakpointChanged:e.onBreakpointChanged},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.layout,(function(t){return(0,o.wg)(),(0,o.j4)(s,{item:t,key:t.i,onMoved:e.onLayoutChanged,onResized:e.onLayoutChanged},null,8,["item","onMoved","onResized"])})),128))]})),_:1},8,["layout","onBreakpointChanged"])])}var w,y,b=n(6835),k=n(8534),_=n(5082),z=(n(1539),n(9826),n(2222),n(1249),n(3907));(function(e){e["LoadRestaurants"]="LoadRestaurants",e["SendContactFeedback"]="SendContactFeedback",e["SendRestaurantFeedback"]="SendRestaurantFeedback"})(w||(w={})),function(e){e["RestaurantsLoaded"]="RestaurantsLoaded",e["SearchRestaurants"]="SearchRestaurants",e["ApplyLayout"]="ApplyLayout",e["MarkFavourite"]="MarkFavourite",e["ChangeViewType"]="ChangeViewType"}(y||(y={}));var Z={ref:"filler",class:"card koalunch-dashboard-item-filler"};function R(e,t,n,a,r,i){var s=(0,o.up)("restaurand-card"),u=(0,o.up)("grid-item");return e.item?((0,o.wg)(),(0,o.j4)(u,{ref:"gridItem",x:e.item.x,y:e.item.y,w:e.item.w,h:e.item.h,i:e.item.i,"min-h":e.minH,"max-h":e.maxH,key:e.item.i,"drag-allow-from":".card-header","drag-ignore-from":".koalunch-card-content",onMoved:e.onMoved,onResized:e.onResized},{default:(0,o.w5)((function(){return[(0,o._)("div",Z,null,512),(0,o.Wm)(s,{restaurant:e.item.restaurant,onResized:e.onCardResized},null,8,["restaurant","onResized"])]})),_:1},8,["x","y","w","h","i","min-h","max-h","onMoved","onResized"])):(0,o.kq)("",!0)}n(8309);var x=["data-res"],C={class:"card-header koalunch-card-header"},D={class:"card-header-title koalunch-card-title"},S={key:0,class:"tag is-danger mr-2"},L={class:"icon is-large ion-ionic koalunch-icon"},N=["href"],T={class:"icon is-large ion-ionic koalunch-icon"},F={class:"content koalunch-card-content"};function I(e,t,n,a,r,i){var u,c,l,d,f=(0,o.up)("ion-icon"),v=(0,o.up)("busy-indicator"),h=(0,o.up)("failure-message"),m=(0,o.up)("PDFPreview"),p=(0,o.up)("menu-section");return(0,o.wg)(),(0,o.iD)("div",{class:"card koalunch-card",ref:"card","data-res":null===(u=e.restaurant)||void 0===u?void 0:u.id},[(0,o._)("header",C,[(0,o._)("p",D,[null!==(c=e.restaurant)&&void 0!==c&&c.isNew?((0,o.wg)(),(0,o.iD)("span",S,(0,s.zw)(e.$t("restaurant.new")),1)):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,s.zw)(null===(l=e.restaurant)||void 0===l?void 0:l.name),1)]),void 0!==e.restaurant?((0,o.wg)(),(0,o.iD)("a",{key:0,class:"button is-ghost koalunch-card-header-button",onClick:t[0]||(t[0]=function(){var t;return e.onFavourite((null===(t=e.restaurant)||void 0===t?void 0:t.id)||"")})},[(0,o._)("span",L,[(0,o.Wm)(f,{size:"large",name:"heart"+(e.favourites[e.restaurant.id]?"":"-outline")},null,8,["name"])])])):(0,o.kq)("",!0),(0,o._)("a",{class:"button is-ghost koalunch-card-header-button",target:"_blank",href:null===(d=e.restaurant)||void 0===d?void 0:d.url},[(0,o._)("span",T,[(0,o.Wm)(f,{size:"large",name:"open-outline"})])],8,N)]),(0,o._)("div",F,[e.isLoading?((0,o.wg)(),(0,o.j4)(v,{key:0})):(0,o.kq)("",!0),e.isFailed?((0,o.wg)(),(0,o.j4)(h,{key:1,message:"Menu se nepodařilo načíst"})):(0,o.kq)("",!0),e.menu?((0,o.wg)(),(0,o.iD)(o.HY,{key:2},[e.isPdfMenu?((0,o.wg)(),(0,o.j4)(m,{key:0,pdfInfo:e.menu.pdfInfo},null,8,["pdfInfo"])):(0,o.kq)("",!0),e.menu.menus&&0!==e.menu.menus.length?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(e.menu.menus,(function(e){return(0,o.wg)(),(0,o.j4)(p,{section:e,key:e},null,8,["section"])})),128)):(0,o.kq)("",!0)],64)):(0,o.kq)("",!0)])],8,x)}var O,V=n(2482);(function(e){e[e["Standard"]=0]="Standard",e[e["PDF"]=1]="PDF"})(O||(O={}));var M={class:"table is-striped is-narrow is-hoverable"},j={key:0},$={colspan:"2"};function B(e,t,n,a,r,i){return(0,o.wg)(),(0,o.iD)("table",M,[(0,o._)("tbody",null,[e.section.name?((0,o.wg)(),(0,o.iD)("tr",j,[(0,o._)("td",$,[(0,o._)("strong",null,(0,s.zw)(e.section.name),1)])])):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.section.meals,(function(e){return(0,o.wg)(),(0,o.iD)("tr",{key:e},[(0,o._)("td",null,(0,s.zw)(e.name),1),(0,o._)("td",null,(0,s.zw)(e.price),1)])})),128))])])}var U=(0,o.aZ)({props:{section:{required:!0,type:Object}}}),q=n(3744);const P=(0,q.Z)(U,[["render",B],["__scopeId","data-v-75d7052c"]]);var H=P,A=n.p+"img/spinner.f072ddf8.svg",W=function(e){return(0,o.dD)("data-v-189a965b"),e=e(),(0,o.Cn)(),e},E={class:"koalunch-busyIndicator"},Y=W((function(){return(0,o._)("img",{src:A},null,-1)})),K=[Y];function Q(e,t,n,a,r,i){return(0,o.wg)(),(0,o.iD)("div",E,K)}var J=(0,o.aZ)({});const G=(0,q.Z)(J,[["render",Q],["__scopeId","data-v-189a965b"]]);var X=G,ee=n.p+"img/wrong.4c9fe4b5.png",te=function(e){return(0,o.dD)("data-v-44a39288"),e=e(),(0,o.Cn)(),e},ne={class:"koalunch-failure"},ae={class:"koalunch-failure-text"},re=te((function(){return(0,o._)("img",{src:ee,class:"koalunch-failure-image"},null,-1)}));function ie(e,t,n,a,r,i){return(0,o.wg)(),(0,o.iD)("div",ne,[(0,o._)("p",ae,(0,s.zw)(e.message),1),re])}var oe=(0,o.aZ)({props:{message:String}});const se=(0,q.Z)(oe,[["render",ie],["__scopeId","data-v-44a39288"]]);var ue=se,ce={key:1,class:"koalunch-pdf-container"},le={ref:"canvas"};function de(e,t,n,a,r,i){var s=(0,o.up)("failure-message");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.isFailed?((0,o.wg)(),(0,o.j4)(s,{key:0,message:"Menu se nepovedlo načíst"})):(0,o.kq)("",!0),e.isFailed?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",ce,[(0,o._)("canvas",le,null,512)]))],64)}var fe=n(2372),ve=(0,o.aZ)({components:{FailureMessage:ue},props:{pdfInfo:Object},data:function(){return{isFailed:!1,pdfLib:fe}},methods:{_renderPage:function(e,t,n){var a=n.getViewport({scale:t});e.height=a.height,e.width=a.width,n.render({canvasContext:e.getContext("2d"),viewport:a})},_loadPdf:function(e,t){var n=this;return(0,k.Z)((0,b.Z)().mark((function a(){var r;return(0,b.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.pdfLib.getDocument(e).promise;case 2:return r=a.sent,a.abrupt("return",r.getPage(t));case 4:case"end":return a.stop()}}),a)})))()}},mounted:function(){var e=this;return(0,k.Z)((0,b.Z)().mark((function t(){var n,a,r,i;return(0,b.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isFailed=!1,e.pdfInfo){t.next=3;break}return t.abrupt("return");case 3:return a="https://cors-anywhere.herokuapp.com/".concat(e.pdfInfo.url),r=null!==(n=e.pdfInfo.content)&&void 0!==n?n:a,t.prev=5,t.next=8,e._loadPdf(r,e.pdfInfo.pages[0]);case 8:i=t.sent,e._renderPage(e.$refs.canvas,.9,i),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](5),e.isFailed=!0;case 15:case"end":return t.stop()}}),t,null,[[5,12]])})))()}});const he=(0,q.Z)(ve,[["render",de],["__scopeId","data-v-6fc5df28"]]);var me=he,pe=(0,o.aZ)({components:{MenuSection:H,BusyIndicator:X,PDFPreview:me,FailureMessage:ue},props:{restaurant:Object},emits:["resized"],computed:(0,_.Z)((0,_.Z)({},(0,z.rn)({favourites:function(e){return e.favourites.reduce((function(e,t){return(0,_.Z)((0,_.Z)({},e),{},(0,V.Z)({},t,!0))}),{})}})),{},{isPdfMenu:function(){var e;return(null===(e=this.menu)||void 0===e?void 0:e.type)===O.PDF}}),data:function(){return{isLoading:!0,isFailed:!1,menu:null}},methods:(0,_.Z)((0,_.Z)({},(0,z.OI)([y.MarkFavourite])),{},{onFavourite:function(e){this[y.MarkFavourite](e)}}),mounted:function(){var e=this;return(0,k.Z)((0,b.Z)().mark((function t(){var n,a,r,i;return(0,b.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new window.ResizeObserver((function(t){e.$emit("resized",{width:t[0].contentRect.width>0?t[0].contentRect.width:window.screen.availWidth,height:t[0].contentRect.height})})),n.observe(e.$refs.card),t.prev=2,t.next=5,fetch("/api/menu/".concat(null===(a=e.restaurant)||void 0===a?void 0:a.id));case 5:return r=t.sent,t.next=8,r.json();case 8:i=t.sent,e.menu=i,e.isLoading=!1,t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](2),e.isFailed=!0,e.isLoading=!1;case 17:case"end":return t.stop()}}),t,null,[[2,13]])})))()}});const ge=(0,q.Z)(pe,[["render",I],["__scopeId","data-v-0a39c2db"]]);var we=ge,ye=(0,o.aZ)({emits:["moved","resized"],data:function(){return{minH:10,maxH:1/0,nonReactive:{}}},components:{RestaurandCard:we},props:{item:Object},mounted:function(){var e=this,t=new window.ResizeObserver((function(){e.nonReactive.isResizing||e.onCardResized(e.nonReactive.cardSize)}));t.observe(this.$refs.filler)},methods:{onCardResized:function(e){var t=this.$refs.gridItem;if(t&&e){this.nonReactive.isResizing=!0;try{var n=t.calcWH(e.height,e.width,!0);this.maxH=n.h,this.minH=n.h,t.eventBus.emit("resizeEvent",{eventType:"resizeend",i:t.i,x:t.innerX,y:t.innerY,h:n.h,w:n.w}),this.nonReactive.cardSize=e}finally{this.nonReactive.isResizing=!1}}},onMoved:function(){this.$emit("moved")},onResized:function(){this.$emit("resized")}}});const be=(0,q.Z)(ye,[["render",R],["__scopeId","data-v-9e2b52d0"]]);var ke=be,_e=(0,o.aZ)({components:{DashboardItem:ke},props:{searchQuery:String},data:function(){return{layout:[],currentBreakpoint:"lg"}},methods:(0,_.Z)((0,_.Z)((0,_.Z)({},(0,z.nv)([w.LoadRestaurants])),(0,z.OI)([y.SearchRestaurants,y.ApplyLayout])),{},{resetInnerLayoutData:function(){var e=this.$refs.gridLayout;e.lastBreakpoint=null,e.layouts={}},filterLayout:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""!==t&&this[y.SearchRestaurants](""),this.$nextTick((function(){e[y.SearchRestaurants](t)}))},recreateLayout:function(){var e=this.searchQuery?[]:this.storedLayout[this.currentBreakpoint]||[],t=this.restaurants.reduce((function(t,n){var a=e.find((function(e){var t=e.i;return t===n.id}));return a?t.withLayout.push((0,_.Z)((0,_.Z)({},a),{},{restaurant:n})):t.withoutLayout.push(n),t}),{withLayout:[],withoutLayout:[]}),n=t.withLayout,a=t.withoutLayout;this.layout=n.concat(a.map((function(e,t){return{x:t%3,y:Math.floor(t/4),w:1,h:10,i:e.id,restaurant:e}})))},onLayoutChanged:function(){this[y.ApplyLayout]({breakpoint:this.currentBreakpoint,layout:this.layout.map((function(e){return{x:e.x,y:e.y,h:e.h,w:e.w,i:e.i}}))})},onBreakpointChanged:function(e){this.currentBreakpoint=e}}),computed:(0,_.Z)((0,_.Z)({},(0,z.rn)({storedLayout:function(e){return e.layout}})),(0,z.Se)({restaurants:"visibleRestaurants"})),watch:{searchQuery:function(e){this.filterLayout(e)},restaurants:function(){this.recreateLayout()}},mounted:function(){var e=this;return(0,k.Z)((0,b.Z)().mark((function t(){return(0,b.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e[w.LoadRestaurants]();case 2:e.filterLayout(),e.resetInnerLayoutData();case 4:case"end":return t.stop()}}),t)})))()}});const ze=(0,q.Z)(_e,[["render",g]]);var Ze=ze,Re=function(e){return(0,o.dD)("data-v-9fd6bd74"),e=e(),(0,o.Cn)(),e},xe={class:"navbar",role:"navigation","aria-label":"main navigation"},Ce=Re((function(){return(0,o._)("div",{class:"navbar-brand"},[(0,o._)("a",{class:"navbar-item koalunch-navbar-title",href:"#"},"Koalunch"),(0,o._)("a",{role:"button",class:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},[(0,o._)("span",{"aria-hidden":"true"}),(0,o._)("span",{"aria-hidden":"true"}),(0,o._)("span",{"aria-hidden":"true"})])],-1)})),De={class:"navbar-menu"},Se={class:"navbar-start"},Le={class:"navbar-item"},Ne={class:"navbar-end"},Te={class:"navbar-item"},Fe={class:"buttons"};function Ie(e,t,n,a,r,i){var u=(0,o.up)("AddRestaurantDialog"),c=(0,o.up)("ContactDialog");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("nav",xe,[Ce,(0,o._)("div",De,[(0,o._)("div",Se,[(0,o._)("div",Le,[(0,o._)("span",null,(0,s.zw)(e.currentLocation),1)])]),(0,o._)("div",Ne,[(0,o._)("div",Te,[(0,o._)("div",Fe,[(0,o._)("a",{class:"button",onClick:t[0]||(t[0]=function(){return e.showContactDialog&&e.showContactDialog.apply(e,arguments)})},(0,s.zw)(e.$t("contact.contact")),1),(0,o._)("a",{class:"button is-primary",onClick:t[1]||(t[1]=function(){return e.addRestaurant&&e.addRestaurant.apply(e,arguments)})},[(0,o._)("strong",null,(0,s.zw)(e.$t("contact.addRestaurant")),1)])])])])])]),(0,o.Wm)(u,{ref:"addRestaurantDialog"},null,512),(0,o.Wm)(c,{ref:"contactDialog"},null,512)],64)}var Oe=n.p+"img/koaburger.3e79fbc2.png",Ve=function(e){return(0,o.dD)("data-v-afbc3ad2"),e=e(),(0,o.Cn)(),e},Me={class:"container"},je=Ve((function(){return(0,o._)("img",{src:Oe},null,-1)})),$e={class:"notification is-warning"},Be={class:"field"},Ue={class:"label"},qe={class:"control"},Pe={class:"field"},He={class:"label"},Ae={class:"control"},We={class:"field"},Ee={class:"label"},Ye={class:"control"},Ke={class:"field"},Qe={class:"label"},Je={class:"control"},Ge={class:"field is-grouped is-grouped-right"},Xe={class:"control"},et={class:"control"};function tt(e,t,n,r,i,u){var c=(0,o.up)("Modal");return(0,o.wg)(),(0,o.j4)(c,{ref:"modal"},{default:(0,o.w5)((function(){return[(0,o._)("div",Me,[je,(0,o._)("div",$e,(0,s.zw)(e.$t("contact.addRestaurantMessage")),1),(0,o._)("div",Be,[(0,o._)("label",Ue,(0,s.zw)(e.$t("contact.restaurantName")),1),(0,o._)("div",qe,[(0,o.wy)((0,o._)("input",{class:(0,s.C_)(["input",{"is-danger":!e.restaurantName.isValid}]),type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.restaurantName.value=t}),onChange:t[1]||(t[1]=function(t){return e.validate("restaurantName")})},null,34),[[a.nr,e.restaurantName.value]])])]),(0,o._)("div",Pe,[(0,o._)("label",He,(0,s.zw)(e.$t("contact.restaurantUrl")),1),(0,o._)("div",Ae,[(0,o.wy)((0,o._)("input",{class:(0,s.C_)(["input",{"is-danger":!e.restaurantUrl.isValid}]),type:"text","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.restaurantUrl.value=t}),onChange:t[3]||(t[3]=function(t){return e.validate("restaurantUrl")})},null,34),[[a.nr,e.restaurantUrl.value]])])]),(0,o._)("div",We,[(0,o._)("label",Ee,(0,s.zw)(e.$t("contact.yourName")),1),(0,o._)("div",Ye,[(0,o.wy)((0,o._)("input",{class:(0,s.C_)(["input",{"is-danger":!e.name.isValid}]),type:"text","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.name.value=t}),onChange:t[5]||(t[5]=function(t){return e.validate("name")})},null,34),[[a.nr,e.name.value]])])]),(0,o._)("div",Ke,[(0,o._)("label",Qe,(0,s.zw)(e.$t("contact.note")),1),(0,o._)("div",Je,[(0,o.wy)((0,o._)("textarea",{class:(0,s.C_)(["textarea",{"is-danger":!e.note.isValid}]),"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.note.value=t}),onChange:t[7]||(t[7]=function(t){return e.validate("note")})},null,34),[[a.nr,e.note.value]])])]),(0,o._)("div",Ge,[(0,o._)("div",Xe,[(0,o._)("button",{class:"button is-link",onClick:t[8]||(t[8]=function(){return e.submit&&e.submit.apply(e,arguments)})},(0,s.zw)(e.$t("contact.submit")),1)]),(0,o._)("div",et,[(0,o._)("button",{class:"button is-link is-light",onClick:t[9]||(t[9]=function(){return e.toggle&&e.toggle.apply(e,arguments)})},(0,s.zw)(e.$t("contact.cancel")),1)])])])]})),_:1},512)}var nt={class:"modal-content"};function at(e,t,n,a,r,i){var u=(0,o.up)("busy-indicator");return(0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)(["modal",{"is-active":e.isOpen}])},[(0,o._)("div",{class:"modal-background",onClick:t[0]||(t[0]=function(){return e.toggle&&e.toggle.apply(e,arguments)})}),(0,o._)("div",nt,[e.isBusy?((0,o.wg)(),(0,o.j4)(u,{key:0})):(0,o.kq)("",!0),e.isBusy?(0,o.kq)("",!0):(0,o.WI)(e.$slots,"default",{key:1},void 0,!0)]),(0,o._)("button",{class:"modal-close is-large","aria-label":"close",onClick:t[1]||(t[1]=function(){return e.toggle&&e.toggle.apply(e,arguments)})})],2)}var rt=(0,o.aZ)({components:{BusyIndicator:X},data:function(){return{isOpen:!1,isBusy:!1}},methods:{toggle:function(){this.isOpen=!this.isOpen}}});const it=(0,q.Z)(rt,[["render",at],["__scopeId","data-v-597cbd9a"]]);var ot=it,st=(0,o.aZ)({methods:{modal:function(){return this.$refs.modal},toggle:function(){this.modal().toggle()},setBusy:function(e){this.modal().isBusy=e}}});n(4747);function ut(e){return(0,o.aZ)({computed:{allFields:function(){var t=this;return e.map((function(e){return t[e]}))}},methods:{validate:function(e){var t=e?[this[e]]:this.allFields;return t.forEach((function(e){e.isValid=!e.isRequired||Boolean(e.value)})),t.every((function(e){return e.isValid}))},resetFields:function(){this.allFields.forEach((function(e){e.value="",e.isValid=!0}))}}})}var ct=ut,lt=(0,o.aZ)({mixins:[st,ct(["restaurantName","restaurantUrl","name","note"])],components:{Modal:ot},data:function(){return{restaurantName:{value:"",isValid:!0,isRequired:!0},restaurantUrl:{value:"",isValid:!0,isRequired:!0},name:{value:"",isValid:!0,isRequired:!0},note:{value:"",isValid:!0,isRequired:!1}}},methods:(0,_.Z)((0,_.Z)({},(0,z.nv)([w.SendRestaurantFeedback])),{},{submit:function(){if(this.validate())try{this.setBusy(!0),this[w.SendRestaurantFeedback]({name:this.name.value,note:this.note.value,restaurantName:this.restaurantName.value,restaurantUrl:this.restaurantUrl.value})}finally{this.setBusy(!1),this.resetFields(),this.toggle()}}})});const dt=(0,q.Z)(lt,[["render",tt],["__scopeId","data-v-afbc3ad2"]]);var ft=dt,vt=n.p+"img/pencil.49df2b88.png",ht=function(e){return(0,o.dD)("data-v-47b021cf"),e=e(),(0,o.Cn)(),e},mt={class:"container"},pt=ht((function(){return(0,o._)("img",{src:vt},null,-1)})),gt={class:"notification is-warning"},wt={class:"field"},yt={class:"label"},bt={class:"control"},kt={class:"field"},_t={class:"label"},zt={class:"control"},Zt={class:"field is-grouped is-grouped-right"},Rt={class:"control"},xt={class:"control"};function Ct(e,t,n,r,i,u){var c=(0,o.up)("Modal");return(0,o.wg)(),(0,o.j4)(c,{ref:"modal"},{default:(0,o.w5)((function(){return[(0,o._)("div",mt,[pt,(0,o._)("div",gt,(0,s.zw)(e.$t("contact.contactMessage")),1),(0,o._)("div",wt,[(0,o._)("label",yt,(0,s.zw)(e.$t("contact.yourName")),1),(0,o._)("div",bt,[(0,o.wy)((0,o._)("input",{class:(0,s.C_)(["input",{"is-danger":!e.name.isValid}]),type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.name.value=t}),onChange:t[1]||(t[1]=function(t){return e.validate("name")})},null,34),[[a.nr,e.name.value]])])]),(0,o._)("div",kt,[(0,o._)("label",_t,(0,s.zw)(e.$t("contact.message")),1),(0,o._)("div",zt,[(0,o.wy)((0,o._)("textarea",{class:(0,s.C_)(["textarea",{"is-danger":!e.message.isValid}]),"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.message.value=t}),onChange:t[3]||(t[3]=function(t){return e.validate("message")})},null,34),[[a.nr,e.message.value]])])]),(0,o._)("div",Zt,[(0,o._)("div",Rt,[(0,o._)("button",{class:"button is-link",onClick:t[4]||(t[4]=function(){return e.submit&&e.submit.apply(e,arguments)})},(0,s.zw)(e.$t("contact.submit")),1)]),(0,o._)("div",xt,[(0,o._)("button",{class:"button is-link is-light",onClick:t[5]||(t[5]=function(){return e.toggle&&e.toggle.apply(e,arguments)})},(0,s.zw)(e.$t("contact.cancel")),1)])])])]})),_:1},512)}var Dt=(0,o.aZ)({mixins:[st,ct(["name","message"])],components:{Modal:ot},data:function(){return{name:{value:"",isValid:!0,isRequired:!0},message:{value:"",isValid:!0,isRequired:!0}}},methods:(0,_.Z)((0,_.Z)({},(0,z.nv)([w.SendContactFeedback])),{},{submit:function(){var e=this;return(0,k.Z)((0,b.Z)().mark((function t(){return(0,b.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.validate()){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.setBusy(!0),t.next=6,e[w.SendContactFeedback]({name:e.name.value,note:e.message.value});case 6:return t.prev=6,e.setBusy(!1),e.resetFields(),e.toggle(),t.finish(6);case 11:case"end":return t.stop()}}),t,null,[[2,,6,11]])})))()}})});const St=(0,q.Z)(Dt,[["render",Ct],["__scopeId","data-v-47b021cf"]]);var Lt=St,Nt=(0,o.aZ)({components:{AddRestaurantDialog:ft,ContactDialog:Lt},props:{currentLocation:{type:String,default:"Brno (Holandská)"}},methods:{addRestaurant:function(){var e=this.$refs.addRestaurantDialog;e.toggle()},showContactDialog:function(){var e=this.$refs.contactDialog;e.toggle()}}});const Tt=(0,q.Z)(Nt,[["render",Ie],["__scopeId","data-v-9fd6bd74"]]);var Ft=Tt,It={class:"buttons has-addons koalunch-buttons"},Ot=["onClick"],Vt={class:"icon-text"},Mt={class:"icon ion-ionic koalunch-icon"},jt={key:0,class:"tag is-danger ml-1"};function $t(e,t,n,a,r,i){var u=(0,o.up)("ion-icon");return(0,o.wg)(),(0,o.iD)("div",It,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.viewTypes,(function(t){return(0,o.wg)(),(0,o.iD)("a",{key:t,class:(0,s.C_)(["button koalunch-card-header-button",{"is-selected":e.selectedViewType===t.key,"koalunch-selected":e.selectedViewType===t.key}]),onClick:function(){return e.onSwitch(t.key)}},[(0,o._)("span",Vt,[(0,o._)("span",Mt,[(0,o.Wm)(u,{name:t.icon+(e.selectedViewType===t.key?"":"-outline")},null,8,["name"])]),(0,o._)("span",null,(0,s.zw)(e.$t("viewType.".concat(t.key.toLocaleLowerCase()))),1)]),t.badge?((0,o.wg)(),(0,o.iD)("span",jt,(0,s.zw)(null===t||void 0===t?void 0:t.badge),1)):(0,o.kq)("",!0)],10,Ot)})),128))])}n(9714),n(7327);var Bt=function(e){return e.filter((function(e){var t=e.isNew;return t})).length},Ut=Bt,qt=(0,o.aZ)({methods:(0,_.Z)((0,_.Z)({},(0,z.OI)([y.ChangeViewType])),{},{onSwitch:function(e){this[y.ChangeViewType](e)}}),computed:(0,_.Z)((0,_.Z)((0,_.Z)({},(0,z.rn)({countOfNew:function(e){return Ut(e.restaurants)}})),(0,z.Se)({selectedViewType:"selectedViewType"})),{},{viewTypes:function(){var e=[{key:"All",icon:"grid"},{key:"Favourites",icon:"heart"}];return this.countOfNew>0&&e.push({key:"New",icon:"bulb",badge:this.countOfNew.toString()}),e}})});const Pt=(0,q.Z)(qt,[["render",$t],["__scopeId","data-v-bc077f00"]]);var Ht=Pt,At=500,Wt=(0,o.aZ)({components:{NavBar:Ft,Dashboard:Ze,ShowFavouritesSwitch:Ht},data:function(){return{searchTimeout:0,searchInputValue:"",searchExpression:""}},computed:{isHwWeek:function(){var e=new Date;return 9===e.getMonth()&&e.getDate()>=24}},watch:{searchInputValue:function(e){this.debounceSearch(e)}},methods:{debounceSearch:function(e){var t=this;this.searchTimeout&&clearInterval(this.searchTimeout),this.searchTimeout=setTimeout((function(){t.searchExpression=e,t.searchTimeout=0}),At)}}});const Et=(0,q.Z)(Wt,[["render",p]]);var Yt,Kt,Qt=Et,Jt=(n(6699),n(2023),n(2707),n(8862),Yt={},(0,V.Z)(Yt,w.LoadRestaurants,(function(e){return(0,k.Z)((0,b.Z)().mark((function t(){var n;return(0,b.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/restaurant");case 2:return n=t.sent,t.t0=e,t.t1=y.RestaurantsLoaded,t.next=7,n.json();case 7:t.t2=t.sent,t.t0.commit.call(t.t0,t.t1,t.t2);case 9:case"end":return t.stop()}}),t)})))()})),(0,V.Z)(Yt,w.SendContactFeedback,(function(e,t){return(0,k.Z)((0,b.Z)().mark((function e(){return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/feedback/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:case"end":return e.stop()}}),e)})))()})),(0,V.Z)(Yt,w.SendRestaurantFeedback,(function(e,t){return(0,k.Z)((0,b.Z)().mark((function e(){return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/feedback/addRestaurant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:case"end":return e.stop()}}),e)})))()})),Yt),Gt=new Date,Xt=864e5,en=14,tn=function(e){if(!e.dateAdded)return!1;var t=new Date(e.dateAdded);return(Gt.getTime()-t.getTime())/Xt<=en},nn=tn,an=(Kt={},(0,V.Z)(Kt,y.RestaurantsLoaded,(function(e,t){e.restaurants=t.map((function(e){return(0,_.Z)((0,_.Z)({},e),{},{isNew:nn(e)})}))})),(0,V.Z)(Kt,y.SearchRestaurants,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.searchQuery=t})),(0,V.Z)(Kt,y.ApplyLayout,(function(e,t){var n=t.breakpoint,a=t.layout,r="xs"===n||"xxs"===n?"sm":n;e.layout[r]=a,e.layout=(0,_.Z)((0,_.Z)({},e.layout),{},{xs:e.layout.sm,xxs:e.layout.sm}),localStorage.setItem("layout",JSON.stringify({lg:e.layout.lg}))})),(0,V.Z)(Kt,y.MarkFavourite,(function(e,t){e.favourites.includes(t)?e.favourites=e.favourites.filter((function(e){return e!==t})):e.favourites.push(t),localStorage.setItem("favourites",JSON.stringify(e.favourites))})),(0,V.Z)(Kt,y.ChangeViewType,(function(e,t){e.viewType=t,localStorage.setItem("viewType",e.viewType)})),Kt),rn=(0,z.MT)({state:{searchQuery:"",restaurants:[],layout:JSON.parse(localStorage.getItem("layout")||"{}"),favourites:JSON.parse(localStorage.getItem("favourites")||"[]"),viewType:localStorage.getItem("viewType")||"All"},mutations:an,actions:Jt,modules:{},getters:{visibleRestaurants:function(e){var t=e.searchQuery.toLowerCase(),n=e.restaurants.filter((function(e){return e.name.toLowerCase().includes(t)}));return"Favourites"===e.viewType&&(n=n.filter((function(t){return e.favourites.includes(t.id)}))),"New"===e.viewType&&(n=n.filter((function(e){var t=e.isNew;return t}))),n.sort((function(e){var t=e.isNew;return t?-1:1}))},selectedViewType:function(e){return"New"===e.viewType&&0===Ut(e.restaurants)?"All":e.viewType}}}),on=(n(3948),n(4916),n(4723),n(3324));function sn(){var e=n(8092),t={};return e.keys().forEach((function(n){var a=n.match(/([A-Za-z0-9-_]+)\./i);if(a&&a.length>1){var r=a[1];t[r]=e(n).default||e(n)}})),t}var un=(0,on.o)({legacy:!1,locale:"cs",fallbackLocale:"en",messages:sn(),globalInjection:!0});(0,a.ri)(Qt).use(un).use(rn).use(i()).mount("#app")},8092:function(e,t,n){var a={"./cs.json":6264,"./en.json":3482};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=8092},3414:function(){},172:function(){},2001:function(){},3779:function(){},6558:function(){},2258:function(){}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,a,r,i){if(!a){var o=1/0;for(l=0;l<e.length;l++){a=e[l][0],r=e[l][1],i=e[l][2];for(var s=!0,u=0;u<a.length;u++)(!1&i||o>=i)&&Object.keys(n.O).every((function(e){return n.O[e](a[u])}))?a.splice(u--,1):(s=!1,i<o&&(o=i));if(s){e.splice(l--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[a,r,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/public/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,i,o=a[0],s=a[1],u=a[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(u)var l=u(n)}for(t&&t(a);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(l)},a=self["webpackChunkkoalunch"]=self["webpackChunkkoalunch"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(3373)}));a=n.O(a)})();
//# sourceMappingURL=app-legacy.d1d70847.js.map