(function(){var e={6264:function(e,t,a){"use strict";a.r(t),t["default"]={dashboard:{searchRestaurant:e=>{const{normalize:t}=e;return t(["Vyhledat restauraci"])}},contact:{contact:e=>{const{normalize:t}=e;return t(["Kontakt"])},addRestaurant:e=>{const{normalize:t}=e;return t(["Přidat restauraci"])},restaurantName:e=>{const{normalize:t}=e;return t(["Název restaurace"])},restaurantUrl:e=>{const{normalize:t}=e;return t(["URL adresa"])},submit:e=>{const{normalize:t}=e;return t(["Odeslat"])},cancel:e=>{const{normalize:t}=e;return t(["Zrušit"])},yourName:e=>{const{normalize:t}=e;return t(["Tvoje jméno"])},addRestaurantMessage:e=>{const{normalize:t}=e;return t(["Nenašel jsi zde svou oblíbenou restauraci? Nevadí, dej nám vědět a my se pokusíme ji do seznamu zařadit!"])},note:e=>{const{normalize:t}=e;return t(["Poznámka"])},message:e=>{const{normalize:t}=e;return t(["Vzkaz"])},contactMessage:e=>{const{normalize:t}=e;return t(["Máš nějaké přípomínky nebo návrhy na zlepšení? Napiš nám zprávu a my na tom zapracujeme!"])}},viewType:{all:e=>{const{normalize:t}=e;return t(["Vše"])},favourites:e=>{const{normalize:t}=e;return t(["Oblíbené"])},new:e=>{const{normalize:t}=e;return t(["Nové"])}},restaurant:{new:e=>{const{normalize:t}=e;return t(["NOVINKA"])}}}},3482:function(e,t,a){"use strict";a.r(t),t["default"]={dashboard:{searchRestaurant:e=>{const{normalize:t}=e;return t(["Search Restaurant"])}},contact:{contact:e=>{const{normalize:t}=e;return t(["Contact"])},addRestaurant:e=>{const{normalize:t}=e;return t(["Add Restaurant"])},restaurantName:e=>{const{normalize:t}=e;return t(["Restaurant Name"])},restaurantUrl:e=>{const{normalize:t}=e;return t(["Restaurant URL"])},submit:e=>{const{normalize:t}=e;return t(["Submit"])},cancel:e=>{const{normalize:t}=e;return t(["Cancel"])},yourName:e=>{const{normalize:t}=e;return t(["Your Name"])},addRestaurantMessage:e=>{const{normalize:t}=e;return t(["Are you missing your favourite restaurant? Let us know and we will do our best to include it in our list!"])},note:e=>{const{normalize:t}=e;return t(["Note"])},message:e=>{const{normalize:t}=e;return t(["Message"])},contactMessage:e=>{const{normalize:t}=e;return t(["Having some troubles or ideas what to improve? Feel free to leave us a message!"])}},viewType:{all:e=>{const{normalize:t}=e;return t(["All"])},favourites:e=>{const{normalize:t}=e;return t(["Favourites"])},new:e=>{const{normalize:t}=e;return t(["New"])}},restaurant:{new:e=>{const{normalize:t}=e;return t(["NEW"])}}}},4198:function(e,t,a){"use strict";var n=a(9963),s=a(7502),r=a.n(s),o=a(6252),i=a.p+"img/search.f55b15ab.svg";const l=(0,o._)("div",{class:"koalunch-logo"},null,-1),u={class:"columns field search-row"},c={class:"column is-4 favourite-switch"},d={class:"column is-4"},h={class:"control has-icons-left"},m=["placeholder"],v=(0,o._)("span",{class:"icon is-left"},[(0,o._)("img",{src:i})],-1),g=(0,o.uE)('<footer class="footer"><div class="content has-text-centered"><p><strong>Koalunch</strong> by <a href="https://www.linkedin.com/in/michalkozubik/">Michal Kozubík</a> | <a href="https://narvio.github.io/">Narvio</a> | <a href="https://github.com/Narvio/koalunch">GitHub</a></p></div></footer>',1);function p(e,t,a,s,r,i){const p=(0,o.up)("nav-bar"),f=(0,o.up)("show-favourites-switch"),y=(0,o.up)("dashboard");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(p),l,(0,o._)("div",u,[(0,o._)("div",c,[(0,o.Wm)(f)]),(0,o._)("div",d,[(0,o._)("div",h,[(0,o.wy)((0,o._)("input",{class:"input",type:"text",placeholder:e.$t("dashboard.searchRestaurant"),"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchInputValue=t)},null,8,m),[[n.nr,e.searchInputValue,void 0,{trim:!0}]]),v])])]),(0,o.Wm)(y,{searchQuery:e.searchExpression},null,8,["searchQuery"]),g],64)}function f(e,t,a,n,s,r){const i=(0,o.up)("dashboard-item"),l=(0,o.up)("grid-layout");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(l,{ref:"gridLayout",layout:e.layout,"onUpdate:layout":t[0]||(t[0]=t=>e.layout=t),"col-num":3,"row-height":30,"is-draggable":!0,"is-resizable":!0,"is-mirrored":!1,responsive:!0,"vertical-compact":!0,margin:[10,10],"use-css-transforms":!0,cols:{lg:3,md:2,sm:1,xs:1,xxs:1},onBreakpointChanged:e.onBreakpointChanged},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.layout,(t=>((0,o.wg)(),(0,o.j4)(i,{item:t,key:t.i,onMoved:e.onLayoutChanged,onResized:e.onLayoutChanged},null,8,["item","onMoved","onResized"])))),128))])),_:1},8,["layout","onBreakpointChanged"])])}var y,w,b=a(3907);(function(e){e["LoadRestaurants"]="LoadRestaurants",e["SendContactFeedback"]="SendContactFeedback",e["SendRestaurantFeedback"]="SendRestaurantFeedback"})(y||(y={})),function(e){e["RestaurantsLoaded"]="RestaurantsLoaded",e["SearchRestaurants"]="SearchRestaurants",e["ApplyLayout"]="ApplyLayout",e["MarkFavourite"]="MarkFavourite",e["ChangeViewType"]="ChangeViewType"}(w||(w={}));const k={ref:"filler",class:"card koalunch-dashboard-item-filler"};function _(e,t,a,n,s,r){const i=(0,o.up)("restaurand-card"),l=(0,o.up)("grid-item");return e.item?((0,o.wg)(),(0,o.j4)(l,{ref:"gridItem",x:e.item.x,y:e.item.y,w:e.item.w,h:e.item.h,i:e.item.i,"min-h":e.minH,"max-h":e.maxH,key:e.item.i,"drag-allow-from":".card-header","drag-ignore-from":".koalunch-card-content",onMoved:e.onMoved,onResized:e.onResized},{default:(0,o.w5)((()=>[(0,o._)("div",k,null,512),(0,o.Wm)(i,{restaurant:e.item.restaurant,onResized:e.onCardResized},null,8,["restaurant","onResized"])])),_:1},8,["x","y","w","h","i","min-h","max-h","onMoved","onResized"])):(0,o.kq)("",!0)}var z=a(3577);const R=["data-res"],C={class:"card-header koalunch-card-header"},S={class:"card-header-title koalunch-card-title"},D={key:0,class:"tag is-danger mr-2"},L={class:"icon is-large ion-ionic koalunch-icon"},x=["href"],N={class:"icon is-large ion-ionic koalunch-icon"},T={class:"content koalunch-card-content"};function F(e,t,a,n,s,r){const i=(0,o.up)("ion-icon"),l=(0,o.up)("busy-indicator"),u=(0,o.up)("failure-message"),c=(0,o.up)("PDFPreview"),d=(0,o.up)("menu-section");return(0,o.wg)(),(0,o.iD)("div",{class:"card koalunch-card",ref:"card","data-res":e.restaurant?.id},[(0,o._)("header",C,[(0,o._)("p",S,[e.restaurant?.isNew?((0,o.wg)(),(0,o.iD)("span",D,(0,z.zw)(e.$t("restaurant.new")),1)):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,z.zw)(e.restaurant?.name),1)]),void 0!==e.restaurant?((0,o.wg)(),(0,o.iD)("a",{key:0,class:"button is-ghost koalunch-card-header-button",onClick:t[0]||(t[0]=()=>e.onFavourite(e.restaurant?.id||""))},[(0,o._)("span",L,[(0,o.Wm)(i,{size:"large",name:"heart"+(e.favourites[e.restaurant.id]?"":"-outline")},null,8,["name"])])])):(0,o.kq)("",!0),(0,o._)("a",{class:"button is-ghost koalunch-card-header-button",target:"_blank",href:e.restaurant?.url},[(0,o._)("span",N,[(0,o.Wm)(i,{size:"large",name:"open-outline"})])],8,x)]),(0,o._)("div",T,[e.isLoading?((0,o.wg)(),(0,o.j4)(l,{key:0})):(0,o.kq)("",!0),e.isFailed?((0,o.wg)(),(0,o.j4)(u,{key:1,message:"Menu se nepodařilo načíst"})):(0,o.kq)("",!0),e.menu?((0,o.wg)(),(0,o.iD)(o.HY,{key:2},[e.isPdfMenu?((0,o.wg)(),(0,o.j4)(c,{key:0,pdfInfo:e.menu.pdfInfo},null,8,["pdfInfo"])):(0,o.kq)("",!0),e.menu.menus&&0!==e.menu.menus.length?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(e.menu.menus,(e=>((0,o.wg)(),(0,o.j4)(d,{section:e,key:e},null,8,["section"])))),128)):(0,o.kq)("",!0)],64)):(0,o.kq)("",!0)])],8,R)}var I;(function(e){e[e["Standard"]=0]="Standard",e[e["PDF"]=1]="PDF"})(I||(I={}));const O={class:"table is-striped is-narrow is-hoverable"},V={key:0},j={colspan:"2"};function M(e,t,a,n,s,r){return(0,o.wg)(),(0,o.iD)("table",O,[(0,o._)("tbody",null,[e.section.name?((0,o.wg)(),(0,o.iD)("tr",V,[(0,o._)("td",j,[(0,o._)("strong",null,(0,z.zw)(e.section.name),1)])])):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.section.meals,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e},[(0,o._)("td",null,(0,z.zw)(e.name),1),(0,o._)("td",null,(0,z.zw)(e.price),1)])))),128))])])}var $=(0,o.aZ)({props:{section:{required:!0,type:Object}}}),Z=a(3744);const B=(0,Z.Z)($,[["render",M],["__scopeId","data-v-75d7052c"]]);var U=B,q=a.p+"img/spinner.f072ddf8.svg";const P=e=>((0,o.dD)("data-v-189a965b"),e=e(),(0,o.Cn)(),e),H={class:"koalunch-busyIndicator"},A=P((()=>(0,o._)("img",{src:q},null,-1))),W=[A];function E(e,t,a,n,s,r){return(0,o.wg)(),(0,o.iD)("div",H,W)}var Y=(0,o.aZ)({});const K=(0,Z.Z)(Y,[["render",E],["__scopeId","data-v-189a965b"]]);var Q=K,J=a.p+"img/wrong.4c9fe4b5.png";const G=e=>((0,o.dD)("data-v-44a39288"),e=e(),(0,o.Cn)(),e),X={class:"koalunch-failure"},ee={class:"koalunch-failure-text"},te=G((()=>(0,o._)("img",{src:J,class:"koalunch-failure-image"},null,-1)));function ae(e,t,a,n,s,r){return(0,o.wg)(),(0,o.iD)("div",X,[(0,o._)("p",ee,(0,z.zw)(e.message),1),te])}var ne=(0,o.aZ)({props:{message:String}});const se=(0,Z.Z)(ne,[["render",ae],["__scopeId","data-v-44a39288"]]);var re=se;const oe={key:1,class:"koalunch-pdf-container"},ie={ref:"canvas"};function le(e,t,a,n,s,r){const i=(0,o.up)("failure-message");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.isFailed?((0,o.wg)(),(0,o.j4)(i,{key:0,message:"Menu se nepovedlo načíst"})):(0,o.kq)("",!0),e.isFailed?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",oe,[(0,o._)("canvas",ie,null,512)]))],64)}const ue=a(2372);var ce=(0,o.aZ)({components:{FailureMessage:re},props:{pdfInfo:Object},data(){return{isFailed:!1,pdfLib:ue}},methods:{_renderPage(e,t,a){const n=a.getViewport({scale:t});e.height=n.height,e.width=n.width,a.render({canvasContext:e.getContext("2d"),viewport:n})},async _loadPdf(e,t){const a=await this.pdfLib.getDocument(e).promise;return a.getPage(t)}},async mounted(){if(this.isFailed=!1,!this.pdfInfo)return;const e=`https://cors-anywhere.herokuapp.com/${this.pdfInfo.url}`,t=this.pdfInfo.content??e;try{const e=await this._loadPdf(t,this.pdfInfo.pages[0]);this._renderPage(this.$refs.canvas,.9,e)}catch(a){this.isFailed=!0}}});const de=(0,Z.Z)(ce,[["render",le],["__scopeId","data-v-6fc5df28"]]);var he=de,me=(0,o.aZ)({components:{MenuSection:U,BusyIndicator:Q,PDFPreview:he,FailureMessage:re},props:{restaurant:Object},emits:["resized"],computed:{...(0,b.rn)({favourites:e=>e.favourites.reduce(((e,t)=>({...e,[t]:!0})),{})}),isPdfMenu(){return this.menu?.type===I.PDF}},data(){return{isLoading:!0,isFailed:!1,menu:null}},methods:{...(0,b.OI)([w.MarkFavourite]),onFavourite(e){this[w.MarkFavourite](e)}},async mounted(){const e=new window.ResizeObserver((e=>{this.$emit("resized",{width:e[0].contentRect.width>0?e[0].contentRect.width:window.screen.availWidth,height:e[0].contentRect.height})}));e.observe(this.$refs.card);try{const e=await fetch(`/api/menu/${this.restaurant?.id}`),t=await e.json();this.menu=t,this.isLoading=!1}catch(t){this.isFailed=!0,this.isLoading=!1}}});const ve=(0,Z.Z)(me,[["render",F],["__scopeId","data-v-0a39c2db"]]);var ge=ve,pe=(0,o.aZ)({emits:["moved","resized"],data(){return{minH:10,maxH:1/0,nonReactive:{}}},components:{RestaurandCard:ge},props:{item:Object},mounted(){const e=new window.ResizeObserver((()=>{this.nonReactive.isResizing||this.onCardResized(this.nonReactive.cardSize)}));e.observe(this.$refs.filler)},methods:{onCardResized(e){const t=this.$refs.gridItem;if(t&&e){this.nonReactive.isResizing=!0;try{const a=t.calcWH(e.height,e.width,!0);this.maxH=a.h,this.minH=a.h,t.eventBus.emit("resizeEvent",{eventType:"resizeend",i:t.i,x:t.innerX,y:t.innerY,h:a.h,w:a.w}),this.nonReactive.cardSize=e}finally{this.nonReactive.isResizing=!1}}},onMoved(){this.$emit("moved")},onResized(){this.$emit("resized")}}});const fe=(0,Z.Z)(pe,[["render",_],["__scopeId","data-v-9e2b52d0"]]);var ye=fe,we=(0,o.aZ)({components:{DashboardItem:ye},props:{searchQuery:String},data(){return{layout:[],currentBreakpoint:"lg"}},methods:{...(0,b.nv)([y.LoadRestaurants]),...(0,b.OI)([w.SearchRestaurants,w.ApplyLayout]),resetInnerLayoutData(){const e=this.$refs.gridLayout;e.lastBreakpoint=null,e.layouts={}},filterLayout(e=""){""!==e&&this[w.SearchRestaurants](""),this.$nextTick((()=>{this[w.SearchRestaurants](e)}))},recreateLayout(){const e=this.searchQuery?[]:this.storedLayout[this.currentBreakpoint]||[],{withLayout:t,withoutLayout:a}=this.restaurants.reduce(((t,a)=>{const n=e.find((({i:e})=>e===a.id));return n?t.withLayout.push({...n,restaurant:a}):t.withoutLayout.push(a),t}),{withLayout:[],withoutLayout:[]});this.layout=t.concat(a.map(((e,t)=>({x:t%3,y:Math.floor(t/4),w:1,h:10,i:e.id,restaurant:e}))))},onLayoutChanged(){this[w.ApplyLayout]({breakpoint:this.currentBreakpoint,layout:this.layout.map((e=>({x:e.x,y:e.y,h:e.h,w:e.w,i:e.i})))})},onBreakpointChanged(e){this.currentBreakpoint=e}},computed:{...(0,b.rn)({storedLayout:e=>e.layout}),...(0,b.Se)({restaurants:"visibleRestaurants"})},watch:{searchQuery(e){this.filterLayout(e)},restaurants(){this.recreateLayout()}},async mounted(){await this[y.LoadRestaurants](),this.filterLayout(),this.resetInnerLayoutData()}});const be=(0,Z.Z)(we,[["render",f]]);var ke=be;const _e=e=>((0,o.dD)("data-v-9fd6bd74"),e=e(),(0,o.Cn)(),e),ze={class:"navbar",role:"navigation","aria-label":"main navigation"},Re=_e((()=>(0,o._)("div",{class:"navbar-brand"},[(0,o._)("a",{class:"navbar-item koalunch-navbar-title",href:"#"},"Koalunch"),(0,o._)("a",{role:"button",class:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},[(0,o._)("span",{"aria-hidden":"true"}),(0,o._)("span",{"aria-hidden":"true"}),(0,o._)("span",{"aria-hidden":"true"})])],-1))),Ce={class:"navbar-menu"},Se={class:"navbar-start"},De={class:"navbar-item"},Le={class:"navbar-end"},xe={class:"navbar-item"},Ne={class:"buttons"};function Te(e,t,a,n,s,r){const i=(0,o.up)("AddRestaurantDialog"),l=(0,o.up)("ContactDialog");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("nav",ze,[Re,(0,o._)("div",Ce,[(0,o._)("div",Se,[(0,o._)("div",De,[(0,o._)("span",null,(0,z.zw)(e.currentLocation),1)])]),(0,o._)("div",Le,[(0,o._)("div",xe,[(0,o._)("div",Ne,[(0,o._)("a",{class:"button",onClick:t[0]||(t[0]=(...t)=>e.showContactDialog&&e.showContactDialog(...t))},(0,z.zw)(e.$t("contact.contact")),1),(0,o._)("a",{class:"button is-primary",onClick:t[1]||(t[1]=(...t)=>e.addRestaurant&&e.addRestaurant(...t))},[(0,o._)("strong",null,(0,z.zw)(e.$t("contact.addRestaurant")),1)])])])])])]),(0,o.Wm)(i,{ref:"addRestaurantDialog"},null,512),(0,o.Wm)(l,{ref:"contactDialog"},null,512)],64)}var Fe=a.p+"img/koaburger.3e79fbc2.png";const Ie=e=>((0,o.dD)("data-v-afbc3ad2"),e=e(),(0,o.Cn)(),e),Oe={class:"container"},Ve=Ie((()=>(0,o._)("img",{src:Fe},null,-1))),je={class:"notification is-warning"},Me={class:"field"},$e={class:"label"},Ze={class:"control"},Be={class:"field"},Ue={class:"label"},qe={class:"control"},Pe={class:"field"},He={class:"label"},Ae={class:"control"},We={class:"field"},Ee={class:"label"},Ye={class:"control"},Ke={class:"field is-grouped is-grouped-right"},Qe={class:"control"},Je={class:"control"};function Ge(e,t,a,s,r,i){const l=(0,o.up)("Modal");return(0,o.wg)(),(0,o.j4)(l,{ref:"modal"},{default:(0,o.w5)((()=>[(0,o._)("div",Oe,[Ve,(0,o._)("div",je,(0,z.zw)(e.$t("contact.addRestaurantMessage")),1),(0,o._)("div",Me,[(0,o._)("label",$e,(0,z.zw)(e.$t("contact.restaurantName")),1),(0,o._)("div",Ze,[(0,o.wy)((0,o._)("input",{class:(0,z.C_)(["input",{"is-danger":!e.restaurantName.isValid}]),type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.restaurantName.value=t),onChange:t[1]||(t[1]=t=>e.validate("restaurantName"))},null,34),[[n.nr,e.restaurantName.value]])])]),(0,o._)("div",Be,[(0,o._)("label",Ue,(0,z.zw)(e.$t("contact.restaurantUrl")),1),(0,o._)("div",qe,[(0,o.wy)((0,o._)("input",{class:(0,z.C_)(["input",{"is-danger":!e.restaurantUrl.isValid}]),type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.restaurantUrl.value=t),onChange:t[3]||(t[3]=t=>e.validate("restaurantUrl"))},null,34),[[n.nr,e.restaurantUrl.value]])])]),(0,o._)("div",Pe,[(0,o._)("label",He,(0,z.zw)(e.$t("contact.yourName")),1),(0,o._)("div",Ae,[(0,o.wy)((0,o._)("input",{class:(0,z.C_)(["input",{"is-danger":!e.name.isValid}]),type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.name.value=t),onChange:t[5]||(t[5]=t=>e.validate("name"))},null,34),[[n.nr,e.name.value]])])]),(0,o._)("div",We,[(0,o._)("label",Ee,(0,z.zw)(e.$t("contact.note")),1),(0,o._)("div",Ye,[(0,o.wy)((0,o._)("textarea",{class:(0,z.C_)(["textarea",{"is-danger":!e.note.isValid}]),"onUpdate:modelValue":t[6]||(t[6]=t=>e.note.value=t),onChange:t[7]||(t[7]=t=>e.validate("note"))},null,34),[[n.nr,e.note.value]])])]),(0,o._)("div",Ke,[(0,o._)("div",Qe,[(0,o._)("button",{class:"button is-link",onClick:t[8]||(t[8]=(...t)=>e.submit&&e.submit(...t))},(0,z.zw)(e.$t("contact.submit")),1)]),(0,o._)("div",Je,[(0,o._)("button",{class:"button is-link is-light",onClick:t[9]||(t[9]=(...t)=>e.toggle&&e.toggle(...t))},(0,z.zw)(e.$t("contact.cancel")),1)])])])])),_:1},512)}const Xe={class:"modal-content"};function et(e,t,a,n,s,r){const i=(0,o.up)("busy-indicator");return(0,o.wg)(),(0,o.iD)("div",{class:(0,z.C_)(["modal",{"is-active":e.isOpen}])},[(0,o._)("div",{class:"modal-background",onClick:t[0]||(t[0]=(...t)=>e.toggle&&e.toggle(...t))}),(0,o._)("div",Xe,[e.isBusy?((0,o.wg)(),(0,o.j4)(i,{key:0})):(0,o.kq)("",!0),e.isBusy?(0,o.kq)("",!0):(0,o.WI)(e.$slots,"default",{key:1},void 0,!0)]),(0,o._)("button",{class:"modal-close is-large","aria-label":"close",onClick:t[1]||(t[1]=(...t)=>e.toggle&&e.toggle(...t))})],2)}var tt=(0,o.aZ)({components:{BusyIndicator:Q},data(){return{isOpen:!1,isBusy:!1}},methods:{toggle(){this.isOpen=!this.isOpen}}});const at=(0,Z.Z)(tt,[["render",et],["__scopeId","data-v-597cbd9a"]]);var nt=at,st=(0,o.aZ)({methods:{modal(){return this.$refs.modal},toggle(){this.modal().toggle()},setBusy(e){this.modal().isBusy=e}}});function rt(e){return(0,o.aZ)({computed:{allFields(){return e.map((e=>this[e]))}},methods:{validate(e){const t=e?[this[e]]:this.allFields;return t.forEach((e=>{e.isValid=!e.isRequired||Boolean(e.value)})),t.every((e=>e.isValid))},resetFields(){this.allFields.forEach((e=>{e.value="",e.isValid=!0}))}}})}var ot=rt,it=(0,o.aZ)({mixins:[st,ot(["restaurantName","restaurantUrl","name","note"])],components:{Modal:nt},data(){return{restaurantName:{value:"",isValid:!0,isRequired:!0},restaurantUrl:{value:"",isValid:!0,isRequired:!0},name:{value:"",isValid:!0,isRequired:!0},note:{value:"",isValid:!0,isRequired:!1}}},methods:{...(0,b.nv)([y.SendRestaurantFeedback]),submit(){if(this.validate())try{this.setBusy(!0),this[y.SendRestaurantFeedback]({name:this.name.value,note:this.note.value,restaurantName:this.restaurantName.value,restaurantUrl:this.restaurantUrl.value})}finally{this.setBusy(!1),this.resetFields(),this.toggle()}}}});const lt=(0,Z.Z)(it,[["render",Ge],["__scopeId","data-v-afbc3ad2"]]);var ut=lt,ct=a.p+"img/pencil.49df2b88.png";const dt=e=>((0,o.dD)("data-v-47b021cf"),e=e(),(0,o.Cn)(),e),ht={class:"container"},mt=dt((()=>(0,o._)("img",{src:ct},null,-1))),vt={class:"notification is-warning"},gt={class:"field"},pt={class:"label"},ft={class:"control"},yt={class:"field"},wt={class:"label"},bt={class:"control"},kt={class:"field is-grouped is-grouped-right"},_t={class:"control"},zt={class:"control"};function Rt(e,t,a,s,r,i){const l=(0,o.up)("Modal");return(0,o.wg)(),(0,o.j4)(l,{ref:"modal"},{default:(0,o.w5)((()=>[(0,o._)("div",ht,[mt,(0,o._)("div",vt,(0,z.zw)(e.$t("contact.contactMessage")),1),(0,o._)("div",gt,[(0,o._)("label",pt,(0,z.zw)(e.$t("contact.yourName")),1),(0,o._)("div",ft,[(0,o.wy)((0,o._)("input",{class:(0,z.C_)(["input",{"is-danger":!e.name.isValid}]),type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.name.value=t),onChange:t[1]||(t[1]=t=>e.validate("name"))},null,34),[[n.nr,e.name.value]])])]),(0,o._)("div",yt,[(0,o._)("label",wt,(0,z.zw)(e.$t("contact.message")),1),(0,o._)("div",bt,[(0,o.wy)((0,o._)("textarea",{class:(0,z.C_)(["textarea",{"is-danger":!e.message.isValid}]),"onUpdate:modelValue":t[2]||(t[2]=t=>e.message.value=t),onChange:t[3]||(t[3]=t=>e.validate("message"))},null,34),[[n.nr,e.message.value]])])]),(0,o._)("div",kt,[(0,o._)("div",_t,[(0,o._)("button",{class:"button is-link",onClick:t[4]||(t[4]=(...t)=>e.submit&&e.submit(...t))},(0,z.zw)(e.$t("contact.submit")),1)]),(0,o._)("div",zt,[(0,o._)("button",{class:"button is-link is-light",onClick:t[5]||(t[5]=(...t)=>e.toggle&&e.toggle(...t))},(0,z.zw)(e.$t("contact.cancel")),1)])])])])),_:1},512)}var Ct=(0,o.aZ)({mixins:[st,ot(["name","message"])],components:{Modal:nt},data(){return{name:{value:"",isValid:!0,isRequired:!0},message:{value:"",isValid:!0,isRequired:!0}}},methods:{...(0,b.nv)([y.SendContactFeedback]),async submit(){if(this.validate())try{this.setBusy(!0),await this[y.SendContactFeedback]({name:this.name.value,note:this.message.value})}finally{this.setBusy(!1),this.resetFields(),this.toggle()}}}});const St=(0,Z.Z)(Ct,[["render",Rt],["__scopeId","data-v-47b021cf"]]);var Dt=St,Lt=(0,o.aZ)({components:{AddRestaurantDialog:ut,ContactDialog:Dt},props:{currentLocation:{type:String,default:"Brno (Holandská)"}},methods:{addRestaurant(){const e=this.$refs.addRestaurantDialog;e.toggle()},showContactDialog(){const e=this.$refs.contactDialog;e.toggle()}}});const xt=(0,Z.Z)(Lt,[["render",Te],["__scopeId","data-v-9fd6bd74"]]);var Nt=xt;const Tt={class:"buttons has-addons koalunch-buttons"},Ft=["onClick"],It={class:"icon-text"},Ot={class:"icon ion-ionic koalunch-icon"},Vt={key:0,class:"tag is-danger ml-1"};function jt(e,t,a,n,s,r){const i=(0,o.up)("ion-icon");return(0,o.wg)(),(0,o.iD)("div",Tt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.viewTypes,(t=>((0,o.wg)(),(0,o.iD)("a",{key:t,class:(0,z.C_)(["button koalunch-card-header-button",{"is-selected":e.selectedViewType===t.key,"koalunch-selected":e.selectedViewType===t.key}]),onClick:()=>e.onSwitch(t.key)},[(0,o._)("span",It,[(0,o._)("span",Ot,[(0,o.Wm)(i,{name:t.icon+(e.selectedViewType===t.key?"":"-outline")},null,8,["name"])]),(0,o._)("span",null,(0,z.zw)(e.$t(`viewType.${t.key.toLocaleLowerCase()}`)),1)]),t.badge?((0,o.wg)(),(0,o.iD)("span",Vt,(0,z.zw)(t?.badge),1)):(0,o.kq)("",!0)],10,Ft)))),128))])}const Mt=e=>e.filter((({isNew:e})=>e)).length;var $t=Mt,Zt=(0,o.aZ)({methods:{...(0,b.OI)([w.ChangeViewType]),onSwitch(e){this[w.ChangeViewType](e)}},computed:{...(0,b.rn)({countOfNew:e=>$t(e.restaurants)}),...(0,b.Se)({selectedViewType:"selectedViewType"}),viewTypes(){const e=[{key:"All",icon:"grid"},{key:"Favourites",icon:"heart"}];return this.countOfNew>0&&e.push({key:"New",icon:"bulb",badge:this.countOfNew.toString()}),e}}});const Bt=(0,Z.Z)(Zt,[["render",jt],["__scopeId","data-v-bc077f00"]]);var Ut=Bt;const qt=500;var Pt=(0,o.aZ)({components:{NavBar:Nt,Dashboard:ke,ShowFavouritesSwitch:Ut},data(){return{searchTimeout:0,searchInputValue:"",searchExpression:""}},watch:{searchInputValue(e){this.debounceSearch(e)}},methods:{debounceSearch(e){this.searchTimeout&&clearInterval(this.searchTimeout),this.searchTimeout=setTimeout((()=>{this.searchExpression=e,this.searchTimeout=0}),qt)}}});const Ht=(0,Z.Z)(Pt,[["render",p]]);var At=Ht,Wt=(a(6699),{async[y.LoadRestaurants](e){const t=await fetch("/api/restaurant");e.commit(w.RestaurantsLoaded,await t.json())},async[y.SendContactFeedback](e,t){await fetch("/feedback/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},async[y.SendRestaurantFeedback](e,t){await fetch("/feedback/addRestaurant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}});const Et=new Date,Yt=864e5,Kt=14,Qt=e=>{if(!e.dateAdded)return!1;const t=new Date(e.dateAdded);return(Et.getTime()-t.getTime())/Yt<=Kt};var Jt=Qt,Gt={[w.RestaurantsLoaded](e,t){e.restaurants=t.map((e=>({...e,isNew:Jt(e)})))},[w.SearchRestaurants](e,t=""){e.searchQuery=t},[w.ApplyLayout](e,{breakpoint:t,layout:a}){const n="xs"===t||"xxs"===t?"sm":t;e.layout[n]=a,e.layout={...e.layout,xs:e.layout.sm,xxs:e.layout.sm},localStorage.setItem("layout",JSON.stringify({lg:e.layout.lg}))},[w.MarkFavourite](e,t){e.favourites.includes(t)?e.favourites=e.favourites.filter((e=>e!==t)):e.favourites.push(t),localStorage.setItem("favourites",JSON.stringify(e.favourites))},[w.ChangeViewType](e,t){e.viewType=t,localStorage.setItem("viewType",e.viewType)}},Xt=(0,b.MT)({state:{searchQuery:"",restaurants:[],layout:JSON.parse(localStorage.getItem("layout")||"{}"),favourites:JSON.parse(localStorage.getItem("favourites")||"[]"),viewType:localStorage.getItem("viewType")||"All"},mutations:Gt,actions:Wt,modules:{},getters:{visibleRestaurants:e=>{const t=e.searchQuery.toLowerCase();let a=e.restaurants.filter((e=>e.name.toLowerCase().includes(t)));return"Favourites"===e.viewType&&(a=a.filter((t=>e.favourites.includes(t.id)))),"New"===e.viewType&&(a=a.filter((({isNew:e})=>e))),a.sort((({isNew:e})=>e?-1:1))},selectedViewType:e=>"New"===e.viewType&&0===$t(e.restaurants)?"All":e.viewType}}),ea=a(3324);function ta(){const e=a(8092),t={};return e.keys().forEach((a=>{const n=a.match(/([A-Za-z0-9-_]+)\./i);if(n&&n.length>1){const s=n[1];t[s]=e(a).default||e(a)}})),t}var aa=(0,ea.o)({legacy:!1,locale:"cs",fallbackLocale:"en",messages:ta(),globalInjection:!0});(0,n.ri)(At).use(aa).use(Xt).use(r()).mount("#app")},8092:function(e,t,a){var n={"./cs.json":6264,"./en.json":3482};function s(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=r,e.exports=s,s.id=8092},3414:function(){},172:function(){},2001:function(){},3779:function(){},6558:function(){},2258:function(){}},t={};function a(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,n,s,r){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],s=e[c][1],r=e[c][2];for(var i=!0,l=0;l<n.length;l++)(!1&r||o>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(i=!1,r<o&&(o=r));if(i){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,s,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/public/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,r,o=n[0],i=n[1],l=n[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(l)var c=l(a)}for(t&&t(n);u<o.length;u++)r=o[u],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},n=self["webpackChunkkoalunch"]=self["webpackChunkkoalunch"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(4198)}));n=a.O(n)})();
//# sourceMappingURL=app.0ba92e8e.js.map